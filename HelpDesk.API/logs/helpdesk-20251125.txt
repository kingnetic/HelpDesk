2025-11-25 08:25:45.907 -06:00 [INF] Application is shutting down...
2025-11-25 08:31:02.307 -06:00 [INF] Starting HelpDesk API
2025-11-25 08:31:02.819 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 08:31:03.796 -06:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 08:31:03.813 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 08:31:03.842 -06:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 08:31:03.926 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 08:31:03.948 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 08:31:03.954 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 08:31:03.963 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 08:31:03.978 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 08:31:03.985 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 08:31:04.288 -06:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 08:31:04.344 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 08:31:04.350 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 08:31:04.366 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 08:31:04.378 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 08:31:04.417 -06:00 [INF] Executed DbCommand (11ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.426 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.434 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.440 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.449 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.455 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.461 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.473 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.481 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.487 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.496 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.548 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 08:31:04.607 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 08:31:04.656 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 08:31:04.683 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:31:04.693 -06:00 [INF] HelpDesk API started successfully
2025-11-25 08:31:04.768 -06:00 [INF] Now listening on: http://localhost:5022
2025-11-25 08:31:04.772 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 08:31:04.775 -06:00 [INF] Hosting environment: Development
2025-11-25 08:31:04.778 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 08:31:42.897 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - null null
2025-11-25 08:31:43.070 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 138.5667 ms
2025-11-25 08:31:43.080 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 184.9695ms
2025-11-25 08:32:43.777 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5022/api/auth/register - application/json 105
2025-11-25 08:32:43.791 -06:00 [INF] CORS policy execution successful.
2025-11-25 08:32:43.801 -06:00 [WRN] Failed to determine the https port for redirect.
2025-11-25 08:32:43.832 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API)'
2025-11-25 08:32:43.853 -06:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 08:32:44.028 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 08:32:44.043 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 08:32:44.056 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API) in 195.8741ms
2025-11-25 08:32:44.060 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API)'
2025-11-25 08:32:44.065 -06:00 [ERR] HTTP POST /api/auth/register responded 500 in 276.1986 ms
System.Exception: Username 'marvin.gonzalez@invur.gob.ni' is already taken. | Email 'marvin.gonzalez@invur.gob.ni' is already taken.
   at HelpDesk.Infrastructure.Auth.AuthService.RegisterAsync(String email, String fullName, String password) in D:\REPOSITORY\HelpDesk\HelpDesk.Infrastructure\Auth\AuthService.cs:line 56
   at HelpDesk.Api.Controllers.AuthController.Register(RegisterRequest model) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Controllers\AuthController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at HelpDesk.API.Middleware.LogEnrichmentMiddleware.InvokeAsync(HttpContext context) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Middleware\LogEnrichmentMiddleware.cs:line 33
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-25 08:32:44.103 -06:00 [ERR] An unhandled exception has occurred while executing the request.
System.Exception: Username 'marvin.gonzalez@invur.gob.ni' is already taken. | Email 'marvin.gonzalez@invur.gob.ni' is already taken.
   at HelpDesk.Infrastructure.Auth.AuthService.RegisterAsync(String email, String fullName, String password) in D:\REPOSITORY\HelpDesk\HelpDesk.Infrastructure\Auth\AuthService.cs:line 56
   at HelpDesk.Api.Controllers.AuthController.Register(RegisterRequest model) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Controllers\AuthController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at HelpDesk.API.Middleware.LogEnrichmentMiddleware.InvokeAsync(HttpContext context) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Middleware\LogEnrichmentMiddleware.cs:line 33
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-11-25 08:32:44.126 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5022/api/auth/register - 500 null text/plain; charset=utf-8 348.5454ms
2025-11-25 08:36:21.356 -06:00 [INF] Application is shutting down...
2025-11-25 08:45:15.900 -06:00 [INF] Starting HelpDesk API
2025-11-25 08:45:16.634 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 08:45:17.718 -06:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 08:45:17.736 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 08:45:17.775 -06:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 08:45:17.850 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 08:45:17.871 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 08:45:17.875 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 08:45:17.885 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 08:45:17.902 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 08:45:17.909 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 08:45:18.475 -06:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 08:45:18.545 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 08:45:18.556 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 08:45:18.578 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 08:45:18.597 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 08:45:18.662 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.672 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.679 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.687 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.694 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.700 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.707 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.719 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.726 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.731 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.745 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.800 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 08:45:18.866 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 08:45:18.907 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 08:45:18.927 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 08:45:18.937 -06:00 [INF] HelpDesk API started successfully
2025-11-25 08:45:19.024 -06:00 [INF] Now listening on: http://localhost:5022
2025-11-25 08:45:19.027 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 08:45:19.029 -06:00 [INF] Hosting environment: Development
2025-11-25 08:45:19.032 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 08:47:30.579 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - null null
2025-11-25 08:47:30.782 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 168.4462 ms
2025-11-25 08:47:30.792 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 216.1813ms
2025-11-25 08:48:04.493 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5022/api/auth/register - application/json 105
2025-11-25 08:48:04.516 -06:00 [INF] CORS policy execution successful.
2025-11-25 08:48:04.525 -06:00 [WRN] Failed to determine the https port for redirect.
2025-11-25 08:48:04.552 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API)'
2025-11-25 08:48:04.569 -06:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 08:48:04.675 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 08:48:04.689 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API) in 112.5905ms
2025-11-25 08:48:04.692 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API)'
2025-11-25 08:48:04.697 -06:00 [ERR] An unhandled exception occurred: El email 'marvin.gonzalez@invur.gob.ni' ya está registrado en el sistema.
HelpDesk.Domain.Exceptions.ConflictException: El email 'marvin.gonzalez@invur.gob.ni' ya está registrado en el sistema.
   at HelpDesk.Infrastructure.Auth.AuthService.RegisterAsync(String email, String fullName, String password) in D:\REPOSITORY\HelpDesk\HelpDesk.Infrastructure\Auth\AuthService.cs:line 49
   at HelpDesk.Api.Controllers.AuthController.Register(RegisterRequest model) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Controllers\AuthController.cs:line 28
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at HelpDesk.API.Middleware.LogEnrichmentMiddleware.InvokeAsync(HttpContext context) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Middleware\LogEnrichmentMiddleware.cs:line 33
   at HelpDesk.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 24
2025-11-25 08:48:04.766 -06:00 [INF] HTTP POST /api/auth/register responded 409 in 252.2160 ms
2025-11-25 08:48:04.774 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5022/api/auth/register - 409 null application/json 281.4947ms
2025-11-25 08:56:13.400 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5022/api/auth/register - application/json 105
2025-11-25 08:56:13.407 -06:00 [INF] CORS policy execution successful.
2025-11-25 08:56:13.414 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API)'
2025-11-25 08:56:13.416 -06:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 08:56:13.497 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 08:56:13.615 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 08:56:13.625 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 08:56:13.741 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Users] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-25 08:56:13.780 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 08:56:13.786 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 08:56:13.795 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 08:56:13.804 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 08:56:13.812 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 08:56:13.848 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p17='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p18='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 200), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [security].[UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [security].[Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 08:56:17.094 -06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-25 08:56:17.105 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API) in 3684.4623ms
2025-11-25 08:56:17.110 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API)'
2025-11-25 08:56:17.113 -06:00 [INF] HTTP POST /api/auth/register responded 200 in 3706.6094 ms
2025-11-25 08:56:17.118 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5022/api/auth/register - 200 null application/json; charset=utf-8 3718.2776ms
2025-11-25 09:05:40.760 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5022/api/auth/login - application/json 69
2025-11-25 09:05:40.767 -06:00 [INF] CORS policy execution successful.
2025-11-25 09:05:40.772 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 09:05:40.781 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 09:05:40.819 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 09:05:40.824 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 38.8477ms
2025-11-25 09:05:40.826 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 09:05:40.829 -06:00 [ERR] An unhandled exception occurred: Email no confirmado. Por favor revisa tu correo para confirmar tu cuenta.
HelpDesk.Domain.Exceptions.UnauthorizedException: Email no confirmado. Por favor revisa tu correo para confirmar tu cuenta.
   at HelpDesk.Infrastructure.Auth.AuthService.LoginAsync(String email, String password) in D:\REPOSITORY\HelpDesk\HelpDesk.Infrastructure\Auth\AuthService.cs:line 93
   at HelpDesk.Api.Controllers.AuthController.Login(LoginRequest model) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Controllers\AuthController.cs:line 41
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at HelpDesk.API.Middleware.LogEnrichmentMiddleware.InvokeAsync(HttpContext context) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Middleware\LogEnrichmentMiddleware.cs:line 33
   at HelpDesk.API.Middleware.GlobalExceptionHandlerMiddleware.InvokeAsync(HttpContext context) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Middleware\GlobalExceptionHandlerMiddleware.cs:line 24
2025-11-25 09:05:40.841 -06:00 [INF] HTTP POST /api/auth/login responded 401 in 74.2360 ms
2025-11-25 09:05:40.844 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5022/api/auth/login - 401 null application/json 83.8588ms
2025-11-25 09:09:01.100 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5022/api/auth/register - application/json 95
2025-11-25 09:09:01.107 -06:00 [INF] CORS policy execution successful.
2025-11-25 09:09:01.145 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API)'
2025-11-25 09:09:01.147 -06:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Register(RegisterRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 09:09:01.154 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 09:09:01.255 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 09:09:01.261 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 09:09:01.271 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Users] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-25 09:09:01.285 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 09:09:01.292 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 09:09:01.298 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 09:09:01.304 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 09:09:01.310 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 09:09:01.320 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p17='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p18='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 200), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [security].[UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [security].[Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 09:09:04.447 -06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-25 09:09:04.449 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API) in 3299.7843ms
2025-11-25 09:09:04.452 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Register (HelpDesk.API)'
2025-11-25 09:09:04.454 -06:00 [INF] HTTP POST /api/auth/register responded 200 in 3347.0054 ms
2025-11-25 09:09:04.457 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5022/api/auth/register - 200 null application/json; charset=utf-8 3357.1741ms
2025-11-25 09:22:36.781 -06:00 [INF] Application is shutting down...
2025-11-25 09:45:14.538 -06:00 [INF] Starting HelpDesk API
2025-11-25 09:45:15.229 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 09:45:16.587 -06:00 [INF] Executed DbCommand (31ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 09:45:16.611 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 09:45:16.686 -06:00 [INF] Executed DbCommand (63ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 09:45:16.824 -06:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 09:45:16.853 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 09:45:16.858 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 09:45:16.884 -06:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 09:45:16.898 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 09:45:16.922 -06:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 09:45:17.391 -06:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 09:45:17.440 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 09:45:17.445 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 09:45:17.463 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 09:45:17.476 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 09:45:17.509 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.522 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.536 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.575 -06:00 [INF] Executed DbCommand (15ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.589 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.604 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.615 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.627 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.638 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.643 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.648 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:17.683 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 09:45:17.810 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 09:45:17.822 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 09:45:18.009 -06:00 [INF] Executed DbCommand (62ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Users] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-25 09:45:18.044 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 09:45:18.079 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 09:45:18.087 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 09:45:18.092 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 09:45:18.100 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 09:45:18.120 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 09:45:18.129 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 09:45:18.156 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p17='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p18='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 200), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [security].[UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [security].[Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 09:45:18.171 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 09:45:18.180 -06:00 [INF] HelpDesk API started successfully
2025-11-25 09:45:18.266 -06:00 [INF] Now listening on: http://localhost:5022
2025-11-25 09:45:18.270 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 09:45:18.272 -06:00 [INF] Hosting environment: Development
2025-11-25 09:45:18.274 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 09:45:38.865 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/auth/confirm-email?userId=4&token=CfDJ8Eq1%2BSTTAG9DrZTigIZ1KJiYFC6UqCdJ0DVuGbkmWUocR%2BMfMuK2V0oMTqPnPi%2Bm8E4CyF5IURuD8LMoKSuqRi18o9P1Xtjv5uRGnQ20XywewDsXNeLvYwk58pLP4qpYhF1dTfI2N2q8rRirbi%2BAHEvtMSRh0%2FBsSvWEi0qqwQp1%2FNTORFZX%2FvvKbWcrFODMdw%3D%3D - null null
2025-11-25 09:45:38.944 -06:00 [WRN] Failed to determine the https port for redirect.
2025-11-25 09:45:38.981 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.ConfirmEmail (HelpDesk.API)'
2025-11-25 09:45:39.004 -06:00 [INF] Route matched with {action = "ConfirmEmail", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmEmail(Int32, System.String) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 09:45:39.076 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-11-25 09:45:39.084 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 09:45:39.089 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 09:45:39.098 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p15='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p16='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [security].[Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FullName] = @p4, [LockoutEnabled] = @p5, [LockoutEnd] = @p6, [NormalizedEmail] = @p7, [NormalizedUserName] = @p8, [PasswordHash] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [SecurityStamp] = @p12, [TwoFactorEnabled] = @p13, [UserName] = @p14
OUTPUT 1
WHERE [Id] = @p15 AND [ConcurrencyStamp] = @p16;
2025-11-25 09:45:39.116 -06:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-25 09:45:39.145 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.ConfirmEmail (HelpDesk.API) in 132.6742ms
2025-11-25 09:45:39.157 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.ConfirmEmail (HelpDesk.API)'
2025-11-25 09:45:39.165 -06:00 [INF] HTTP GET /api/auth/confirm-email responded 200 in 253.5117 ms
2025-11-25 09:45:39.176 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/auth/confirm-email?userId=4&token=CfDJ8Eq1%2BSTTAG9DrZTigIZ1KJiYFC6UqCdJ0DVuGbkmWUocR%2BMfMuK2V0oMTqPnPi%2Bm8E4CyF5IURuD8LMoKSuqRi18o9P1Xtjv5uRGnQ20XywewDsXNeLvYwk58pLP4qpYhF1dTfI2N2q8rRirbi%2BAHEvtMSRh0%2FBsSvWEi0qqwQp1%2FNTORFZX%2FvvKbWcrFODMdw%3D%3D - 200 null application/json; charset=utf-8 313.8709ms
2025-11-25 09:45:39.241 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/favicon.ico - null null
2025-11-25 09:45:39.260 -06:00 [INF] HTTP GET /favicon.ico responded 404 in 5.7794 ms
2025-11-25 09:45:39.266 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/favicon.ico - 404 0 null 25.3641ms
2025-11-25 09:45:39.278 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/favicon.ico, Response status code: 404
2025-11-25 10:31:57.012 -06:00 [INF] Application is shutting down...
2025-11-25 10:34:30.403 -06:00 [INF] Starting HelpDesk API
2025-11-25 10:34:31.037 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 10:34:32.151 -06:00 [INF] Executed DbCommand (38ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 10:34:32.170 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 10:34:32.200 -06:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 10:34:32.302 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 10:34:32.326 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 10:34:32.331 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 10:34:32.342 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 10:34:32.358 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 10:34:32.364 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 10:34:32.747 -06:00 [INF] Executed DbCommand (17ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 10:34:32.824 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 10:34:32.832 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 10:34:32.849 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 10:34:32.860 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 10:34:32.889 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.899 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.907 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.913 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.919 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.923 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.928 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.938 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.943 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.949 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.953 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:32.990 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 10:34:33.048 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 10:34:33.092 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 10:34:33.120 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:34:33.131 -06:00 [INF] HelpDesk API started successfully
2025-11-25 10:34:33.204 -06:00 [INF] Now listening on: http://localhost:5022
2025-11-25 10:34:33.209 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 10:34:33.211 -06:00 [INF] Hosting environment: Development
2025-11-25 10:34:33.213 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 10:40:27.283 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/auth/confirm-email?userId=4&token=CfDJ8Eq1%2BSTTAG9DrZTigIZ1KJiYFC6UqCdJ0DVuGbkmWUocR%2BMfMuK2V0oMTqPnPi%2Bm8E4CyF5IURuD8LMoKSuqRi18o9P1Xtjv5uRGnQ20XywewDsXNeLvYwk58pLP4qpYhF1dTfI2N2q8rRirbi%2BAHEvtMSRh0%2FBsSvWEi0qqwQp1%2FNTORFZX%2FvvKbWcrFODMdw%3D%3D - null null
2025-11-25 10:40:27.341 -06:00 [WRN] Failed to determine the https port for redirect.
2025-11-25 10:40:27.369 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.ConfirmEmail (HelpDesk.API)'
2025-11-25 10:40:27.387 -06:00 [INF] Route matched with {action = "ConfirmEmail", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmEmail(Int32, System.String) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 10:40:27.450 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-11-25 10:40:27.477 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 10:40:27.488 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 10:40:27.573 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[@p15='?' (DbType = Int32), @p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p16='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [security].[Users] SET [AccessFailedCount] = @p0, [ConcurrencyStamp] = @p1, [Email] = @p2, [EmailConfirmed] = @p3, [FullName] = @p4, [LockoutEnabled] = @p5, [LockoutEnd] = @p6, [NormalizedEmail] = @p7, [NormalizedUserName] = @p8, [PasswordHash] = @p9, [PhoneNumber] = @p10, [PhoneNumberConfirmed] = @p11, [SecurityStamp] = @p12, [TwoFactorEnabled] = @p13, [UserName] = @p14
OUTPUT 1
WHERE [Id] = @p15 AND [ConcurrencyStamp] = @p16;
2025-11-25 10:40:27.588 -06:00 [INF] Executing RedirectResult, redirecting to /email-confirmed.html?success=true.
2025-11-25 10:40:27.593 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.ConfirmEmail (HelpDesk.API) in 200.5179ms
2025-11-25 10:40:27.600 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.ConfirmEmail (HelpDesk.API)'
2025-11-25 10:40:27.605 -06:00 [INF] HTTP GET /api/auth/confirm-email responded 302 in 286.7160 ms
2025-11-25 10:40:27.614 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/auth/confirm-email?userId=4&token=CfDJ8Eq1%2BSTTAG9DrZTigIZ1KJiYFC6UqCdJ0DVuGbkmWUocR%2BMfMuK2V0oMTqPnPi%2Bm8E4CyF5IURuD8LMoKSuqRi18o9P1Xtjv5uRGnQ20XywewDsXNeLvYwk58pLP4qpYhF1dTfI2N2q8rRirbi%2BAHEvtMSRh0%2FBsSvWEi0qqwQp1%2FNTORFZX%2FvvKbWcrFODMdw%3D%3D - 302 0 null 332.6604ms
2025-11-25 10:40:27.620 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/email-confirmed.html?success=true - null null
2025-11-25 10:40:27.641 -06:00 [INF] Sending file. Request path: '/email-confirmed.html'. Physical path: 'D:\REPOSITORY\HelpDesk\HelpDesk.API\wwwroot\email-confirmed.html'
2025-11-25 10:40:27.645 -06:00 [INF] HTTP GET /email-confirmed.html responded 200 in 21.0280 ms
2025-11-25 10:40:27.649 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/email-confirmed.html?success=true - 200 4660 text/html 28.7233ms
2025-11-25 10:40:45.211 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger - null null
2025-11-25 10:40:45.217 -06:00 [INF] HTTP GET /swagger responded 404 in 1.9593 ms
2025-11-25 10:40:45.221 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger - 404 0 null 9.3639ms
2025-11-25 10:40:45.227 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/swagger, Response status code: 404
2025-11-25 10:40:50.326 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger - null null
2025-11-25 10:40:50.332 -06:00 [INF] HTTP GET /swagger responded 404 in 2.7205 ms
2025-11-25 10:40:50.337 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger - 404 0 null 11.0558ms
2025-11-25 10:40:50.342 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/swagger, Response status code: 404
2025-11-25 10:41:00.132 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger - null null
2025-11-25 10:41:00.139 -06:00 [INF] HTTP GET /swagger responded 404 in 0.2343 ms
2025-11-25 10:41:00.146 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger - 404 0 null 13.4435ms
2025-11-25 10:41:00.158 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/swagger, Response status code: 404
2025-11-25 10:41:26.632 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger - null null
2025-11-25 10:41:26.636 -06:00 [INF] HTTP GET /swagger responded 404 in 0.2535 ms
2025-11-25 10:41:26.642 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger - 404 0 null 9.6808ms
2025-11-25 10:41:26.652 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/swagger, Response status code: 404
2025-11-25 10:41:46.215 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger - null null
2025-11-25 10:41:46.221 -06:00 [INF] HTTP GET /swagger responded 404 in 0.3000 ms
2025-11-25 10:41:46.223 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger - 404 0 null 7.9855ms
2025-11-25 10:41:46.229 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/swagger, Response status code: 404
2025-11-25 10:41:59.090 -06:00 [INF] Application is shutting down...
2025-11-25 10:44:51.383 -06:00 [INF] Starting HelpDesk API
2025-11-25 10:44:52.439 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 10:44:53.768 -06:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 10:44:53.785 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 10:44:53.836 -06:00 [INF] Executed DbCommand (41ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 10:44:54.001 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 10:44:54.040 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 10:44:54.046 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 10:44:54.057 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 10:44:54.078 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 10:44:54.083 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 10:44:54.526 -06:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 10:44:54.593 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 10:44:54.597 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 10:44:54.614 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 10:44:54.623 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 10:44:54.655 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.663 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.668 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.673 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.678 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.681 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.686 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.696 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.700 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.705 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.709 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.746 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 10:44:54.806 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 10:44:54.845 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 10:44:54.866 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 10:44:54.875 -06:00 [INF] HelpDesk API started successfully
2025-11-25 10:44:54.964 -06:00 [INF] Now listening on: http://localhost:5022
2025-11-25 10:44:54.967 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 10:44:54.972 -06:00 [INF] Hosting environment: Development
2025-11-25 10:44:54.973 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 10:44:59.043 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - null null
2025-11-25 10:44:59.281 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 199.6853 ms
2025-11-25 10:44:59.292 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 254.8677ms
2025-11-25 10:45:17.707 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger - null null
2025-11-25 10:45:17.724 -06:00 [WRN] Failed to determine the https port for redirect.
2025-11-25 10:45:17.762 -06:00 [INF] HTTP GET /swagger responded 404 in 51.4050 ms
2025-11-25 10:45:17.765 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger - 404 0 null 57.4631ms
2025-11-25 10:45:17.773 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/swagger, Response status code: 404
2025-11-25 10:45:40.864 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger - null null
2025-11-25 10:45:40.871 -06:00 [INF] HTTP GET /swagger responded 404 in 2.4174 ms
2025-11-25 10:45:40.874 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger - 404 0 null 9.7168ms
2025-11-25 10:45:40.883 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/swagger, Response status code: 404
2025-11-25 10:45:45.412 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - null null
2025-11-25 10:45:45.431 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 15.2152 ms
2025-11-25 10:45:45.434 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 22.0506ms
2025-11-25 10:51:24.595 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/Catalogs - null null
2025-11-25 10:51:24.721 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 10:51:24.729 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 10:51:24.732 -06:00 [INF] HTTP GET /api/Catalogs responded 401 in 22.4981 ms
2025-11-25 10:51:24.743 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/Catalogs - 401 0 null 148.3045ms
2025-11-25 11:13:54.135 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5022/api/auth/login - application/json 62
2025-11-25 11:13:54.152 -06:00 [INF] CORS policy execution successful.
2025-11-25 11:13:54.156 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 11:13:54.179 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 11:13:54.260 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 11:13:54.417 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 11:13:54.572 -06:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Boolean), @p2='?' (DbType = Guid), @p3='?' (DbType = DateTime2), @p4='?' (Size = 200), @p5='?' (Size = 1000), @p6='?' (DbType = DateTime2), @p7='?' (Size = 200), @p8='?' (Size = 500), @p9='?' (Size = 1000), @p10='?' (Size = 4000), @p11='?' (DbType = DateTime2), @p12='?' (DbType = DateTime2), @p13='?' (DbType = DateTime2), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [IsActiveSession], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-25 11:13:54.601 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 11:13:54.611 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 425.3002ms
2025-11-25 11:13:54.614 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 11:13:54.616 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 466.2166 ms
2025-11-25 11:13:54.622 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5022/api/auth/login - 200 null application/json; charset=utf-8 486.8097ms
2025-11-25 11:14:24.104 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/audit?Page=1&PageSize=10 - null null
2025-11-25 11:14:24.213 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[@__jti_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[IsActiveSession], [u].[JwtId], [u].[LoginAt], [u].[LoginIpAddress], [u].[LoginUserAgent], [u].[LogoutAt], [u].[LogoutIpAddress], [u].[LogoutReason], [u].[LogoutUserAgent], [u].[RefreshToken], [u].[RefreshTokenExpiresAt], [u].[TokenExpiresAt], [u].[UpdatedAt], [u].[UserId]
FROM [security].[UserSessions] AS [u]
WHERE [u].[JwtId] = @__jti_0
2025-11-25 11:14:24.274 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__roleNames_0='?' (Size = 4000), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        INNER JOIN [security].[Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
        WHERE [r0].[Name] IN (
            SELECT [r1].[value]
            FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(256) '$') AS [r1]
        ) AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:14:24.280 -06:00 [INF] Authorization failed. These requirements were not met:
HelpDesk.Infrastructure.Auth.PermissionRequirement
2025-11-25 11:14:24.284 -06:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-11-25 11:14:24.285 -06:00 [INF] HTTP GET /api/audit responded 403 in 176.2670 ms
2025-11-25 11:14:24.287 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/audit?Page=1&PageSize=10 - 403 0 null 183.2574ms
2025-11-25 11:14:47.416 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/Catalogs - null null
2025-11-25 11:14:47.427 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__jti_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[IsActiveSession], [u].[JwtId], [u].[LoginAt], [u].[LoginIpAddress], [u].[LoginUserAgent], [u].[LogoutAt], [u].[LogoutIpAddress], [u].[LogoutReason], [u].[LogoutUserAgent], [u].[RefreshToken], [u].[RefreshTokenExpiresAt], [u].[TokenExpiresAt], [u].[UpdatedAt], [u].[UserId]
FROM [security].[UserSessions] AS [u]
WHERE [u].[JwtId] = @__jti_0
2025-11-25 11:14:47.436 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.CatalogsController.GetCatalogs (HelpDesk.API)'
2025-11-25 11:14:47.442 -06:00 [INF] Route matched with {action = "GetCatalogs", controller = "Catalogs"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCatalogs() on controller HelpDesk.Api.Controllers.CatalogsController (HelpDesk.API).
2025-11-25 11:14:47.448 -06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-25 11:14:47.467 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CreatedAt], [c].[Description], [c].[DisplayOrder], [c].[IsActive], [c].[Name], [c].[ParentId], [c].[UpdatedAt], [c].[Value]
FROM [catalog].[Catalogs] AS [c]
2025-11-25 11:14:47.473 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.CatalogsResultDto'.
2025-11-25 11:14:47.484 -06:00 [INF] Executed action HelpDesk.Api.Controllers.CatalogsController.GetCatalogs (HelpDesk.API) in 37.8261ms
2025-11-25 11:14:47.487 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.CatalogsController.GetCatalogs (HelpDesk.API)'
2025-11-25 11:14:47.488 -06:00 [INF] HTTP GET /api/Catalogs responded 200 in 66.4168 ms
2025-11-25 11:14:47.490 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/Catalogs - 200 null application/json; charset=utf-8 74.2962ms
2025-11-25 11:23:15.159 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/Roles - null null
2025-11-25 11:23:15.176 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__jti_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[IsActiveSession], [u].[JwtId], [u].[LoginAt], [u].[LoginIpAddress], [u].[LoginUserAgent], [u].[LogoutAt], [u].[LogoutIpAddress], [u].[LogoutReason], [u].[LogoutUserAgent], [u].[RefreshToken], [u].[RefreshTokenExpiresAt], [u].[TokenExpiresAt], [u].[UpdatedAt], [u].[UserId]
FROM [security].[UserSessions] AS [u]
WHERE [u].[JwtId] = @__jti_0
2025-11-25 11:23:15.189 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__roleNames_0='?' (Size = 4000), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        INNER JOIN [security].[Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
        WHERE [r0].[Name] IN (
            SELECT [r1].[value]
            FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(256) '$') AS [r1]
        ) AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:23:15.193 -06:00 [INF] Authorization failed. These requirements were not met:
HelpDesk.Infrastructure.Auth.PermissionRequirement
2025-11-25 11:23:15.195 -06:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-11-25 11:23:15.196 -06:00 [INF] HTTP GET /api/Roles responded 403 in 31.1149 ms
2025-11-25 11:23:15.199 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/Roles - 403 0 null 39.7788ms
2025-11-25 11:23:43.635 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/Tickets?Page=1&PageSize=10 - null null
2025-11-25 11:23:43.642 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__jti_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[IsActiveSession], [u].[JwtId], [u].[LoginAt], [u].[LoginIpAddress], [u].[LoginUserAgent], [u].[LogoutAt], [u].[LogoutIpAddress], [u].[LogoutReason], [u].[LogoutUserAgent], [u].[RefreshToken], [u].[RefreshTokenExpiresAt], [u].[TokenExpiresAt], [u].[UpdatedAt], [u].[UserId]
FROM [security].[UserSessions] AS [u]
WHERE [u].[JwtId] = @__jti_0
2025-11-25 11:23:43.646 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.TicketsController.GetTickets (HelpDesk.API)'
2025-11-25 11:23:43.653 -06:00 [INF] Route matched with {action = "GetTickets", controller = "Tickets"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetTickets(HelpDesk.Application.DTOs.TicketFilterRequest) on controller HelpDesk.Api.Controllers.TicketsController (HelpDesk.API).
2025-11-25 11:23:43.669 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleNames_0='?' (Size = 4000), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        INNER JOIN [security].[Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
        WHERE [r0].[Name] IN (
            SELECT [r1].[value]
            FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(256) '$') AS [r1]
        ) AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:23:43.673 -06:00 [INF] Authorization failed. These requirements were not met:
HelpDesk.Infrastructure.Auth.PermissionRequirement
2025-11-25 11:23:43.697 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__f_CreatedById_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [helpdesk].[Tickets] AS [t]
WHERE [t].[CreatedById] = @__f_CreatedById_0
2025-11-25 11:23:43.721 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__f_CreatedById_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32), @__p_2='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Title], [t].[StatusId], [t].[PriorityId], [t].[CategoryId], [t].[TypeId], [t].[CreatedById], [t].[AssignedToEmployeeId], [t].[TicketCreatedAt]
FROM [helpdesk].[Tickets] AS [t]
WHERE [t].[CreatedById] = @__f_CreatedById_0
ORDER BY [t].[TicketCreatedAt] DESC
OFFSET @__p_1 ROWS FETCH NEXT @__p_2 ROWS ONLY
2025-11-25 11:23:43.726 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.PagedResult`1[[HelpDesk.Application.DTOs.TicketListItemDto, HelpDesk.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 11:23:43.741 -06:00 [INF] Executed action HelpDesk.Api.Controllers.TicketsController.GetTickets (HelpDesk.API) in 84.913ms
2025-11-25 11:23:43.744 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.TicketsController.GetTickets (HelpDesk.API)'
2025-11-25 11:23:43.745 -06:00 [INF] HTTP GET /api/Tickets responded 200 in 105.6561 ms
2025-11-25 11:23:43.748 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/Tickets?Page=1&PageSize=10 - 200 null application/json; charset=utf-8 112.4016ms
2025-11-25 11:49:23.988 -06:00 [INF] Application is shutting down...
2025-11-25 11:57:58.546 -06:00 [INF] Starting HelpDesk API
2025-11-25 11:57:59.085 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 11:58:00.009 -06:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 11:58:00.029 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 11:58:00.056 -06:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 11:58:00.130 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 11:58:00.153 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 11:58:00.160 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 11:58:00.174 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 11:58:00.187 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 11:58:00.192 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 11:58:00.471 -06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 11:58:00.517 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 11:58:00.522 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 11:58:00.535 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 11:58:00.555 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 11:58:00.588 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.597 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.602 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.608 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.613 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.620 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.624 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.636 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.641 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.646 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.650 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.689 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 11:58:00.737 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 11:58:00.772 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 11:58:00.801 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 11:58:00.809 -06:00 [INF] HelpDesk API started successfully
2025-11-25 11:58:00.882 -06:00 [INF] Now listening on: http://localhost:5022
2025-11-25 11:58:00.885 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 11:58:00.886 -06:00 [INF] Hosting environment: Development
2025-11-25 11:58:00.887 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 12:07:21.102 -06:00 [INF] Application is shutting down...
2025-11-25 12:34:12.440 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 12:34:13.086 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 12:34:14.098 -06:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 12:34:14.113 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 12:34:14.139 -06:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 12:34:14.224 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 12:34:14.243 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 12:34:14.247 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 12:34:14.254 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 12:34:14.266 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 12:34:14.270 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 12:34:14.564 -06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 12:34:14.620 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 12:34:14.627 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 12:34:14.649 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 12:34:14.660 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 12:34:14.690 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.697 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.702 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.706 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.710 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.714 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.737 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.746 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.750 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.753 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.758 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.791 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 12:34:14.840 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 12:34:14.881 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 12:34:14.903 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:34:14.910 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 12:34:14.988 -06:00 [INF] Now listening on: http://localhost:5022
2025-11-25 12:34:14.993 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 12:34:14.994 -06:00 [INF] Hosting environment: Development
2025-11-25 12:34:14.995 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 12:34:48.620 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - null null
2025-11-25 12:34:48.817 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 160.6794 ms
2025-11-25 12:34:48.824 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 206.5902ms
2025-11-25 12:43:48.178 -06:00 [INF] Application is shutting down...
2025-11-25 12:47:45.757 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 12:47:48.094 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 12:47:49.234 -06:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 12:47:49.248 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 12:47:49.274 -06:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 12:47:49.347 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 12:47:49.363 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 12:47:49.364 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 12:47:49.369 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 12:47:49.379 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 12:47:49.382 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 12:47:49.711 -06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 12:47:49.755 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 12:47:49.756 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 12:47:49.767 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 12:47:49.772 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 12:47:49.793 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.795 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.796 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.797 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.797 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.798 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.798 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.804 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.805 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.806 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.806 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.832 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 12:47:49.876 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 12:47:49.908 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 12:47:49.923 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 12:47:49.927 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 12:47:50.369 -06:00 [INF] Now listening on: https://localhost:62274
2025-11-25 12:47:50.369 -06:00 [INF] Now listening on: http://localhost:62275
2025-11-25 12:47:50.371 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 12:47:50.372 -06:00 [INF] Hosting environment: Development
2025-11-25 12:47:50.372 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 13:00:42.195 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/ - null null
2025-11-25 13:00:42.243 -06:00 [INF] HTTP GET / responded 301 in 22.7102 ms
2025-11-25 13:00:42.255 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/ - 301 0 null 69.7117ms
2025-11-25 13:00:42.262 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/index.html - null null
2025-11-25 13:00:42.327 -06:00 [INF] HTTP GET /index.html responded 200 in 64.1597 ms
2025-11-25 13:00:42.328 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/index.html - 200 null text/html;charset=utf-8 66.3073ms
2025-11-25 13:00:42.577 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 13:00:42.716 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 137.9215 ms
2025-11-25 13:00:42.716 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 139.496ms
2025-11-25 15:59:28.427 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 15:59:29.141 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 15:59:30.167 -06:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 15:59:30.184 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 15:59:30.231 -06:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 15:59:30.306 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 15:59:30.325 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 15:59:30.326 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 15:59:30.333 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 15:59:30.348 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 15:59:30.352 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 15:59:30.715 -06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 15:59:30.762 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 15:59:30.763 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 15:59:30.773 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 15:59:30.778 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 15:59:30.804 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.807 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.808 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.809 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.809 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.810 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.840 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.841 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.852 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.853 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.854 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.856 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:30.937 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[RolePermissions] ([Permission], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1);
2025-11-25 15:59:30.971 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 15:59:31.098 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 15:59:31.105 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 15:59:31.170 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Users] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-25 15:59:31.187 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 15:59:31.228 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 15:59:31.231 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 15:59:31.232 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 15:59:31.236 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 15:59:31.247 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 15:59:31.250 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 15:59:31.269 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p17='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p18='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 200), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [security].[UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [security].[Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 15:59:31.273 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 15:59:31.363 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 15:59:31.364 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 15:59:31.370 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Users] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-25 15:59:31.375 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 15:59:31.376 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 15:59:31.377 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 15:59:31.378 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 15:59:31.378 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 15:59:31.379 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 15:59:31.380 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 15:59:31.381 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p17='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p18='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 200), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [security].[UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [security].[Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 15:59:31.387 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 15:59:31.392 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 15:59:31.752 -06:00 [INF] Now listening on: https://localhost:59098
2025-11-25 15:59:31.753 -06:00 [INF] Now listening on: http://localhost:59099
2025-11-25 15:59:31.755 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 15:59:31.756 -06:00 [INF] Hosting environment: Development
2025-11-25 15:59:31.756 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 15:59:48.158 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 15:59:48.158 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/favicon-32x32.png - null null
2025-11-25 15:59:48.243 -06:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 45.6268 ms
2025-11-25 15:59:48.251 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/favicon-32x32.png - 200 628 image/png 102.1442ms
2025-11-25 15:59:48.363 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 168.5281 ms
2025-11-25 15:59:48.364 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 215.511ms
2025-11-25 16:01:20.066 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/auth/login - application/json 62
2025-11-25 16:01:20.070 -06:00 [INF] CORS policy execution successful.
2025-11-25 16:01:20.073 -06:00 [INF] HTTP POST /api/auth/login responded 307 in 4.3921 ms
2025-11-25 16:01:20.074 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/auth/login - 307 0 null 9.2967ms
2025-11-25 16:01:20.149 -06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7276/api/auth/login - null null
2025-11-25 16:01:20.152 -06:00 [INF] CORS policy execution successful.
2025-11-25 16:01:20.153 -06:00 [INF] HTTP OPTIONS /api/auth/login responded 204 in 1.5306 ms
2025-11-25 16:01:20.153 -06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7276/api/auth/login - 204 null null 4.8714ms
2025-11-25 16:01:20.158 -06:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/auth/login - application/json 62
2025-11-25 16:01:20.159 -06:00 [INF] CORS policy execution successful.
2025-11-25 16:01:20.184 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 16:01:20.199 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 16:01:20.238 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) - Validation state: "Valid"
2025-11-25 16:01:20.264 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 16:01:20.392 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 16:01:20.467 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 200), @p10='?' (Size = 500), @p11='?' (Size = 1000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [DeletedAt], [IsActiveSession], [IsDeleted], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-25 16:01:20.472 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 231.7781ms.
2025-11-25 16:01:20.478 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 16:01:20.485 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 282.2892ms
2025-11-25 16:01:20.485 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 16:01:20.486 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 327.9075 ms
2025-11-25 16:01:20.489 -06:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/auth/login - 200 null application/json; charset=utf-8 331.1047ms
2025-11-25 16:01:58.667 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Users - null null
2025-11-25 16:01:58.667 -06:00 [INF] HTTP GET /api/Users responded 307 in 0.3269 ms
2025-11-25 16:01:58.668 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Users - 307 0 null 1.4737ms
2025-11-25 16:01:58.675 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Users - null null
2025-11-25 16:01:58.676 -06:00 [INF] CORS policy execution successful.
2025-11-25 16:01:58.685 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 16:01:58.688 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 16:01:58.689 -06:00 [INF] HTTP GET /api/Users responded 401 in 13.2223 ms
2025-11-25 16:01:58.689 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Users - 401 0 null 13.9775ms
2025-11-25 20:33:56.852 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 20:33:57.865 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 20:33:58.809 -06:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 20:33:58.824 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 20:33:58.851 -06:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 20:33:58.925 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 20:33:58.942 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 20:33:58.943 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 20:33:58.949 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 20:33:58.963 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 20:33:58.967 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 20:33:59.295 -06:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 20:33:59.347 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 20:33:59.349 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 20:33:59.359 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 20:33:59.365 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 20:33:59.385 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.388 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.388 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.389 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.389 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.390 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.391 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.391 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.396 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.396 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.397 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.397 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.429 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 20:33:59.466 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 20:33:59.497 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 20:33:59.506 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 20:33:59.509 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 20:33:59.510 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 20:33:59.516 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:33:59.520 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 20:33:59.925 -06:00 [INF] Now listening on: https://localhost:59746
2025-11-25 20:33:59.925 -06:00 [INF] Now listening on: http://localhost:59747
2025-11-25 20:33:59.927 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 20:33:59.927 -06:00 [INF] Hosting environment: Development
2025-11-25 20:33:59.928 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 20:46:14.210 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 20:46:14.380 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 139.2894 ms
2025-11-25 20:46:14.385 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 183.6482ms
2025-11-25 20:47:08.368 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/auth/login - application/json 62
2025-11-25 20:47:08.372 -06:00 [INF] CORS policy execution successful.
2025-11-25 20:47:08.379 -06:00 [INF] HTTP POST /api/auth/login responded 307 in 8.1924 ms
2025-11-25 20:47:08.380 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/auth/login - 307 0 null 12.4241ms
2025-11-25 20:47:08.424 -06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7276/api/auth/login - null null
2025-11-25 20:47:08.426 -06:00 [INF] CORS policy execution successful.
2025-11-25 20:47:08.427 -06:00 [INF] HTTP OPTIONS /api/auth/login responded 204 in 1.5665 ms
2025-11-25 20:47:08.428 -06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7276/api/auth/login - 204 null null 3.8406ms
2025-11-25 20:47:08.432 -06:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/auth/login - application/json 62
2025-11-25 20:47:08.432 -06:00 [INF] CORS policy execution successful.
2025-11-25 20:47:08.477 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 20:47:08.495 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 20:47:08.529 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) - Validation state: "Valid"
2025-11-25 20:47:08.558 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 20:47:08.708 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 20:47:08.850 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 200), @p10='?' (Size = 500), @p11='?' (Size = 1000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [DeletedAt], [IsActiveSession], [IsDeleted], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-25 20:47:08.872 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 340.9459ms.
2025-11-25 20:47:08.877 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 20:47:08.884 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 385.3844ms
2025-11-25 20:47:08.884 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 20:47:08.919 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[SecurityAuditLogs] ([CreatedAt], [DeletedAt], [DurationMs], [ErrorMessage], [IpAddress], [IsDeleted], [Method], [Path], [StatusCode], [UpdatedAt], [UserAgent], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-25 20:47:08.923 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 490.8655 ms
2025-11-25 20:47:08.927 -06:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/auth/login - 200 null application/json; charset=utf-8 494.8184ms
2025-11-25 20:47:40.146 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/auth/user-info - null null
2025-11-25 20:47:40.148 -06:00 [INF] HTTP GET /api/auth/user-info responded 307 in 0.6896 ms
2025-11-25 20:47:40.148 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/auth/user-info - 307 0 null 1.7469ms
2025-11-25 20:47:40.152 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/auth/user-info - null null
2025-11-25 20:47:40.152 -06:00 [INF] CORS policy execution successful.
2025-11-25 20:47:40.159 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 20:47:40.163 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 20:47:40.163 -06:00 [INF] HTTP GET /api/auth/user-info responded 401 in 11.2100 ms
2025-11-25 20:47:40.163 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/auth/user-info - 401 0 null 11.7623ms
2025-11-25 20:48:10.742 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Catalogs - null null
2025-11-25 20:48:10.743 -06:00 [INF] HTTP GET /api/Catalogs responded 307 in 0.1529 ms
2025-11-25 20:48:10.743 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Catalogs - 307 0 null 0.9602ms
2025-11-25 20:48:10.746 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Catalogs - null null
2025-11-25 20:48:10.747 -06:00 [INF] CORS policy execution successful.
2025-11-25 20:48:10.750 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 20:48:10.750 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 20:48:10.751 -06:00 [INF] HTTP GET /api/Catalogs responded 401 in 3.8904 ms
2025-11-25 20:48:10.751 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Catalogs - 401 0 null 4.3334ms
2025-11-25 20:59:49.963 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 20:59:51.012 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 20:59:51.903 -06:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 20:59:51.921 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 20:59:51.953 -06:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 20:59:52.045 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 20:59:52.066 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 20:59:52.067 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 20:59:52.074 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 20:59:52.087 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 20:59:52.091 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 20:59:52.436 -06:00 [INF] Executed DbCommand (14ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 20:59:52.488 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 20:59:52.490 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 20:59:52.499 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 20:59:52.505 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 20:59:52.524 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.526 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.527 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.527 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.528 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.528 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.529 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.530 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.534 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.535 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.535 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.536 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.563 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 20:59:52.598 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 20:59:52.626 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 20:59:52.636 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 20:59:52.638 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 20:59:52.639 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 20:59:52.645 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 20:59:52.649 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 20:59:52.979 -06:00 [INF] Now listening on: https://localhost:61314
2025-11-25 20:59:52.979 -06:00 [INF] Now listening on: http://localhost:61315
2025-11-25 20:59:52.980 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 20:59:52.981 -06:00 [INF] Hosting environment: Development
2025-11-25 20:59:52.981 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 21:00:11.777 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 21:00:11.919 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 114.5138 ms
2025-11-25 21:00:11.924 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 159.6629ms
2025-11-25 21:00:25.279 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Users - null null
2025-11-25 21:00:25.286 -06:00 [INF] HTTP GET /api/Users responded 307 in 4.7529 ms
2025-11-25 21:00:25.286 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Users - 307 0 null 7.7866ms
2025-11-25 21:00:25.332 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Users - null null
2025-11-25 21:00:25.334 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:00:25.361 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
HelpDesk.Infrastructure.Auth.PermissionRequirement
2025-11-25 21:00:25.364 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:00:25.364 -06:00 [INF] HTTP GET /api/Users responded 401 in 31.4010 ms
2025-11-25 21:00:25.366 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Users - 401 0 null 34.1486ms
2025-11-25 21:00:42.729 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Catalogs - null null
2025-11-25 21:00:42.729 -06:00 [INF] HTTP GET /api/Catalogs responded 307 in 0.2394 ms
2025-11-25 21:00:42.729 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Catalogs - 307 0 null 0.8215ms
2025-11-25 21:00:42.734 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Catalogs - null null
2025-11-25 21:00:42.734 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:00:42.741 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:00:42.741 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:00:42.741 -06:00 [INF] HTTP GET /api/Catalogs responded 401 in 6.9451 ms
2025-11-25 21:00:42.741 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Catalogs - 401 0 null 7.5293ms
2025-11-25 21:00:45.385 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Catalogs - null null
2025-11-25 21:00:45.385 -06:00 [INF] HTTP GET /api/Catalogs responded 307 in 0.1116 ms
2025-11-25 21:00:45.385 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Catalogs - 307 0 null 0.634ms
2025-11-25 21:00:45.391 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Catalogs - null null
2025-11-25 21:00:45.392 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:00:45.399 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:00:45.399 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:00:45.399 -06:00 [INF] HTTP GET /api/Catalogs responded 401 in 7.5968 ms
2025-11-25 21:00:45.399 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Catalogs - 401 0 null 8.0432ms
2025-11-25 21:01:21.209 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/auth/login - application/json 62
2025-11-25 21:01:21.210 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:01:21.210 -06:00 [INF] HTTP POST /api/auth/login responded 307 in 0.2143 ms
2025-11-25 21:01:21.210 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/auth/login - 307 0 null 0.8394ms
2025-11-25 21:01:21.214 -06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7276/api/auth/login - null null
2025-11-25 21:01:21.215 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:01:21.216 -06:00 [INF] HTTP OPTIONS /api/auth/login responded 204 in 1.2266 ms
2025-11-25 21:01:21.216 -06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7276/api/auth/login - 204 null null 2.7848ms
2025-11-25 21:01:21.218 -06:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/auth/login - application/json 62
2025-11-25 21:01:21.219 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:01:21.228 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 21:01:21.242 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 21:01:21.272 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) - Validation state: "Valid"
2025-11-25 21:01:21.295 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:01:21.418 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 21:01:21.551 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 200), @p10='?' (Size = 500), @p11='?' (Size = 1000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [DeletedAt], [IsActiveSession], [IsDeleted], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-25 21:01:21.572 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 297.1998ms.
2025-11-25 21:01:21.576 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 21:01:21.585 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 340.3582ms
2025-11-25 21:01:21.585 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 21:01:21.616 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[SecurityAuditLogs] ([CreatedAt], [DeletedAt], [DurationMs], [ErrorMessage], [IpAddress], [IsDeleted], [Method], [Path], [StatusCode], [UpdatedAt], [UserAgent], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-25 21:01:21.620 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 401.2456 ms
2025-11-25 21:01:21.623 -06:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/auth/login - 200 null application/json; charset=utf-8 404.1134ms
2025-11-25 21:01:43.516 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/index.html - null null
2025-11-25 21:01:43.572 -06:00 [INF] HTTP GET /index.html responded 200 in 55.6486 ms
2025-11-25 21:01:43.572 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/index.html - 200 null text/html;charset=utf-8 56.1365ms
2025-11-25 21:01:43.700 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 21:01:43.718 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 17.6357 ms
2025-11-25 21:01:43.718 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 18.0318ms
2025-11-25 21:01:49.025 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Catalogs - null null
2025-11-25 21:01:49.025 -06:00 [INF] HTTP GET /api/Catalogs responded 307 in 0.1804 ms
2025-11-25 21:01:49.026 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Catalogs - 307 0 null 0.8726ms
2025-11-25 21:02:15.606 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/auth/user-info - null null
2025-11-25 21:02:15.606 -06:00 [INF] HTTP GET /api/auth/user-info responded 307 in 0.1096 ms
2025-11-25 21:02:15.606 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/auth/user-info - 307 0 null 0.5223ms
2025-11-25 21:07:37.263 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 21:07:38.155 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 21:07:39.063 -06:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:07:39.075 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 21:07:39.098 -06:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 21:07:39.156 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 21:07:39.170 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:07:39.171 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 21:07:39.176 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 21:07:39.186 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 21:07:39.189 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 21:07:39.480 -06:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:07:39.519 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:07:39.521 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:07:39.529 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 21:07:39.535 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 21:07:39.552 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.555 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.556 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.556 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.557 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.557 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.558 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.558 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.562 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.563 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.564 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.564 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.589 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:07:39.624 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:07:39.651 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:07:39.659 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:07:39.662 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:07:39.663 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:07:39.668 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:07:39.671 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 21:07:39.989 -06:00 [INF] Now listening on: https://localhost:61845
2025-11-25 21:07:39.989 -06:00 [INF] Now listening on: http://localhost:61846
2025-11-25 21:07:39.991 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 21:07:39.991 -06:00 [INF] Hosting environment: Development
2025-11-25 21:07:39.991 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 21:08:01.806 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 21:08:01.955 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 124.5793 ms
2025-11-25 21:08:01.960 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.6176ms
2025-11-25 21:08:13.596 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/auth/user-info - null null
2025-11-25 21:08:13.604 -06:00 [INF] HTTP GET /api/auth/user-info responded 307 in 5.3187 ms
2025-11-25 21:08:13.606 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/auth/user-info - 307 0 null 9.5371ms
2025-11-25 21:08:13.670 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/auth/user-info - null null
2025-11-25 21:08:13.674 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:08:13.696 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:08:13.699 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:08:13.699 -06:00 [INF] HTTP GET /api/auth/user-info responded 401 in 26.2257 ms
2025-11-25 21:08:13.701 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/auth/user-info - 401 0 null 31.973ms
2025-11-25 21:08:28.440 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Users - null null
2025-11-25 21:08:28.441 -06:00 [INF] HTTP GET /api/Users responded 307 in 0.2566 ms
2025-11-25 21:08:28.441 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Users - 307 0 null 1.0211ms
2025-11-25 21:08:28.446 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Users - null null
2025-11-25 21:08:28.447 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:08:28.455 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
HelpDesk.Infrastructure.Auth.PermissionRequirement
2025-11-25 21:08:28.456 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:08:28.456 -06:00 [INF] HTTP GET /api/Users responded 401 in 9.4884 ms
2025-11-25 21:08:28.456 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Users - 401 0 null 10.0836ms
2025-11-25 21:09:38.695 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/index.html - null null
2025-11-25 21:09:38.740 -06:00 [INF] HTTP GET /index.html responded 200 in 44.5476 ms
2025-11-25 21:09:38.740 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/index.html - 200 null text/html;charset=utf-8 45.1879ms
2025-11-25 21:09:38.800 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger-ui.css - null null
2025-11-25 21:09:38.800 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/index.css - null null
2025-11-25 21:09:38.806 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/index.js - null null
2025-11-25 21:09:38.806 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger-ui-bundle.js - null null
2025-11-25 21:09:38.809 -06:00 [INF] HTTP GET /index.js responded 200 in 2.7086 ms
2025-11-25 21:09:38.809 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger-ui-standalone-preset.js - null null
2025-11-25 21:09:38.809 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/index.js - 200 null application/javascript;charset=utf-8 3.2025ms
2025-11-25 21:09:38.811 -06:00 [INF] HTTP GET /index.css responded 200 in 10.7886 ms
2025-11-25 21:09:38.812 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/index.css - 200 152 text/css 11.2525ms
2025-11-25 21:09:38.814 -06:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 4.6062 ms
2025-11-25 21:09:38.814 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger-ui-standalone-preset.js - 200 77352 text/javascript 5.1624ms
2025-11-25 21:09:38.823 -06:00 [INF] HTTP GET /swagger-ui.css responded 200 in 23.1760 ms
2025-11-25 21:09:38.827 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger-ui.css - 200 23647 text/css 26.7833ms
2025-11-25 21:09:38.829 -06:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 22.5981 ms
2025-11-25 21:09:38.829 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger-ui-bundle.js - 200 424767 text/javascript 23.3465ms
2025-11-25 21:09:39.027 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 21:09:39.032 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/favicon-32x32.png - null null
2025-11-25 21:09:39.033 -06:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 0.8027 ms
2025-11-25 21:09:39.033 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/favicon-32x32.png - 200 628 image/png 1.1983ms
2025-11-25 21:09:39.043 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 15.9254 ms
2025-11-25 21:09:39.043 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.4916ms
2025-11-25 21:10:09.238 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 21:10:09.915 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 21:10:11.406 -06:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:10:11.428 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 21:10:11.478 -06:00 [INF] Executed DbCommand (44ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 21:10:11.580 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 21:10:11.600 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:10:11.601 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 21:10:11.606 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 21:10:11.616 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 21:10:11.620 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 21:10:11.929 -06:00 [INF] Executed DbCommand (15ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:10:11.981 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:10:11.983 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:10:11.993 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 21:10:12.000 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 21:10:12.022 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.024 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.025 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.026 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.026 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.027 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.028 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.028 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.032 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.033 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.034 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.034 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.060 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:10:12.097 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:10:12.125 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:10:12.135 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:10:12.138 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:10:12.140 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:10:12.147 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:10:12.151 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 21:10:12.520 -06:00 [INF] Now listening on: https://localhost:62039
2025-11-25 21:10:12.520 -06:00 [INF] Now listening on: http://localhost:62040
2025-11-25 21:10:12.522 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 21:10:12.523 -06:00 [INF] Hosting environment: Development
2025-11-25 21:10:12.523 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 21:10:13.108 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 21:10:13.299 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 147.6977 ms
2025-11-25 21:10:13.305 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 212.3265ms
2025-11-25 21:10:21.809 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Users - null null
2025-11-25 21:10:21.818 -06:00 [INF] HTTP GET /api/Users responded 307 in 6.6225 ms
2025-11-25 21:10:21.819 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Users - 307 0 null 10.9352ms
2025-11-25 21:10:21.867 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Users - null null
2025-11-25 21:10:21.870 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:10:21.900 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
HelpDesk.Infrastructure.Auth.PermissionRequirement
2025-11-25 21:10:21.903 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:10:21.903 -06:00 [INF] HTTP GET /api/Users responded 401 in 34.0008 ms
2025-11-25 21:10:21.904 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Users - 401 0 null 37.3469ms
2025-11-25 21:10:43.163 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/auth/user-info - null null
2025-11-25 21:10:43.164 -06:00 [INF] HTTP GET /api/auth/user-info responded 307 in 0.2238 ms
2025-11-25 21:10:43.164 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/auth/user-info - 307 0 null 0.914ms
2025-11-25 21:10:43.174 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/auth/user-info - null null
2025-11-25 21:10:43.178 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:10:43.185 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:10:43.186 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:10:43.186 -06:00 [INF] HTTP GET /api/auth/user-info responded 401 in 8.6502 ms
2025-11-25 21:10:43.187 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/auth/user-info - 401 0 null 12.4751ms
2025-11-25 21:12:15.263 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/auth/login - application/json 62
2025-11-25 21:12:15.264 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:12:15.264 -06:00 [INF] HTTP POST /api/auth/login responded 307 in 0.1882 ms
2025-11-25 21:12:15.264 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/auth/login - 307 0 null 1.0016ms
2025-11-25 21:12:15.270 -06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7276/api/auth/login - null null
2025-11-25 21:12:15.270 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:12:15.272 -06:00 [INF] HTTP OPTIONS /api/auth/login responded 204 in 1.4844 ms
2025-11-25 21:12:15.272 -06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7276/api/auth/login - 204 null null 2.2133ms
2025-11-25 21:12:15.275 -06:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/auth/login - application/json 62
2025-11-25 21:12:15.276 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:12:15.288 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 21:12:15.306 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 21:12:15.340 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) - Validation state: "Valid"
2025-11-25 21:12:15.366 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:12:15.494 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 21:12:15.631 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 200), @p10='?' (Size = 500), @p11='?' (Size = 1000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [DeletedAt], [IsActiveSession], [IsDeleted], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-25 21:12:15.653 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 309.84ms.
2025-11-25 21:12:15.658 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 21:12:15.664 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 355.4362ms
2025-11-25 21:12:15.665 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 21:12:15.699 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[SecurityAuditLogs] ([CreatedAt], [DeletedAt], [DurationMs], [ErrorMessage], [IpAddress], [IsDeleted], [Method], [Path], [StatusCode], [UpdatedAt], [UserAgent], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-25 21:12:15.704 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 427.8937 ms
2025-11-25 21:12:15.706 -06:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/auth/login - 200 null application/json; charset=utf-8 430.7037ms
2025-11-25 21:12:43.917 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/auth/user-info - null null
2025-11-25 21:12:43.918 -06:00 [INF] HTTP GET /api/auth/user-info responded 307 in 0.1239 ms
2025-11-25 21:12:43.918 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/auth/user-info - 307 0 null 0.8783ms
2025-11-25 21:12:43.923 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/auth/user-info - null null
2025-11-25 21:12:43.923 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:12:43.928 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:12:43.928 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:12:43.928 -06:00 [INF] HTTP GET /api/auth/user-info responded 401 in 5.5434 ms
2025-11-25 21:12:43.929 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/auth/user-info - 401 0 null 6.0362ms
2025-11-25 21:17:51.871 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 21:17:52.718 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 21:18:04.287 -06:00 [INF] Executed DbCommand (385ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [HelpDeskDB];
2025-11-25 21:18:04.392 -06:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [HelpDeskDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-11-25 21:18:04.412 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:18:04.415 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 21:18:04.440 -06:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 21:18:04.505 -06:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 21:18:04.524 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:18:04.525 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 21:18:04.530 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 21:18:04.539 -06:00 [INF] Applying migration '20251121145435_initial'.
2025-11-25 21:18:04.586 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'helpdesk') IS NULL EXEC(N'CREATE SCHEMA [helpdesk];');
2025-11-25 21:18:04.587 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'security') IS NULL EXEC(N'CREATE SCHEMA [security];');
2025-11-25 21:18:04.589 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [helpdesk].[CatalogItems] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(150) NOT NULL,
    [Type] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_CatalogItems] PRIMARY KEY ([Id])
);
2025-11-25 21:18:04.591 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[Role] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(max) NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Role] PRIMARY KEY ([Id])
);
2025-11-25 21:18:04.594 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[Roles] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(256) NULL,
    [NormalizedName] nvarchar(256) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    CONSTRAINT [PK_Roles] PRIMARY KEY ([Id])
);
2025-11-25 21:18:04.596 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [helpdesk].[TicketAuditLogs] (
    [Id] int NOT NULL IDENTITY,
    [TicketId] int NOT NULL,
    [UserId] int NOT NULL,
    [Action] nvarchar(200) NOT NULL,
    [Detail] text NULL,
    [IpAddress] nvarchar(100) NULL,
    [UserAgent] nvarchar(500) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_TicketAuditLogs] PRIMARY KEY ([Id])
);
2025-11-25 21:18:04.598 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [helpdesk].[Tickets] (
    [Id] int NOT NULL IDENTITY,
    [Title] nvarchar(250) NOT NULL,
    [Description] text NOT NULL,
    [StatusId] int NOT NULL,
    [PriorityId] int NOT NULL,
    [CategoryId] int NOT NULL,
    [TypeId] int NULL,
    [CreatedById] int NOT NULL,
    [AssignedToEmployeeId] int NULL,
    [TicketCreatedAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Tickets] PRIMARY KEY ([Id])
);
2025-11-25 21:18:04.599 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[Users] (
    [Id] int NOT NULL IDENTITY,
    [FullName] nvarchar(200) NULL,
    [UserName] nvarchar(256) NULL,
    [NormalizedUserName] nvarchar(256) NULL,
    [Email] nvarchar(256) NULL,
    [NormalizedEmail] nvarchar(256) NULL,
    [EmailConfirmed] bit NOT NULL,
    [PasswordHash] nvarchar(max) NULL,
    [SecurityStamp] nvarchar(max) NULL,
    [ConcurrencyStamp] nvarchar(max) NULL,
    [PhoneNumber] nvarchar(max) NULL,
    [PhoneNumberConfirmed] bit NOT NULL,
    [TwoFactorEnabled] bit NOT NULL,
    [LockoutEnd] datetimeoffset NULL,
    [LockoutEnabled] bit NOT NULL,
    [AccessFailedCount] int NOT NULL,
    CONSTRAINT [PK_Users] PRIMARY KEY ([Id])
);
2025-11-25 21:18:04.602 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[UserSessions] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [JwtId] uniqueidentifier NOT NULL,
    [TokenExpiresAt] datetime2 NOT NULL,
    [LoginAt] datetime2 NOT NULL,
    [LogoutAt] datetime2 NULL,
    [LoginIpAddress] nvarchar(200) NULL,
    [LoginUserAgent] nvarchar(1000) NULL,
    [LogoutIpAddress] nvarchar(200) NULL,
    [LogoutUserAgent] nvarchar(1000) NULL,
    [LogoutReason] nvarchar(500) NULL,
    [IsActiveSession] bit NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_UserSessions] PRIMARY KEY ([Id])
);
2025-11-25 21:18:04.606 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[RolePermissions] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [Permission] nvarchar(100) NOT NULL,
    CONSTRAINT [PK_RolePermissions] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RolePermissions_Role_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [security].[Role] ([Id]) ON DELETE CASCADE
);
2025-11-25 21:18:04.609 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[RoleClaims] (
    [Id] int NOT NULL IDENTITY,
    [RoleId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_RoleClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_RoleClaims_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [security].[Roles] ([Id]) ON DELETE CASCADE
);
2025-11-25 21:18:04.611 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [helpdesk].[TicketComments] (
    [Id] int NOT NULL IDENTITY,
    [TicketId] int NOT NULL,
    [UserId] int NOT NULL,
    [Comment] text NOT NULL,
    [CreatedAtLocal] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_TicketComments] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TicketComments_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [helpdesk].[Tickets] ([Id]) ON DELETE CASCADE
);
2025-11-25 21:18:04.613 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [helpdesk].[TicketStatusHistory] (
    [Id] int NOT NULL IDENTITY,
    [TicketId] int NOT NULL,
    [StatusId] int NOT NULL,
    [OccurredAt] datetime2 NOT NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_TicketStatusHistory] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_TicketStatusHistory_Tickets_TicketId] FOREIGN KEY ([TicketId]) REFERENCES [helpdesk].[Tickets] ([Id]) ON DELETE CASCADE
);
2025-11-25 21:18:04.615 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[UserClaims] (
    [Id] int NOT NULL IDENTITY,
    [UserId] int NOT NULL,
    [ClaimType] nvarchar(max) NULL,
    [ClaimValue] nvarchar(max) NULL,
    CONSTRAINT [PK_UserClaims] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_UserClaims_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [security].[Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 21:18:04.618 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[UserLogins] (
    [LoginProvider] nvarchar(450) NOT NULL,
    [ProviderKey] nvarchar(450) NOT NULL,
    [ProviderDisplayName] nvarchar(max) NULL,
    [UserId] int NOT NULL,
    CONSTRAINT [PK_UserLogins] PRIMARY KEY ([LoginProvider], [ProviderKey]),
    CONSTRAINT [FK_UserLogins_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [security].[Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 21:18:04.620 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[UserRoles] (
    [UserId] int NOT NULL,
    [RoleId] int NOT NULL,
    CONSTRAINT [PK_UserRoles] PRIMARY KEY ([UserId], [RoleId]),
    CONSTRAINT [FK_UserRoles_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [security].[Roles] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UserRoles_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [security].[Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 21:18:04.623 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[UserTokens] (
    [UserId] int NOT NULL,
    [LoginProvider] nvarchar(450) NOT NULL,
    [Name] nvarchar(450) NOT NULL,
    [Value] nvarchar(max) NULL,
    CONSTRAINT [PK_UserTokens] PRIMARY KEY ([UserId], [LoginProvider], [Name]),
    CONSTRAINT [FK_UserTokens_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [security].[Users] ([Id]) ON DELETE CASCADE
);
2025-11-25 21:18:04.624 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RoleClaims_RoleId] ON [security].[RoleClaims] ([RoleId]);
2025-11-25 21:18:04.624 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_RolePermissions_RoleId] ON [security].[RolePermissions] ([RoleId]);
2025-11-25 21:18:04.625 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [RoleNameIndex] ON [security].[Roles] ([NormalizedName]) WHERE [NormalizedName] IS NOT NULL;
2025-11-25 21:18:04.626 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TicketComments_TicketId] ON [helpdesk].[TicketComments] ([TicketId]);
2025-11-25 21:18:04.627 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_TicketStatusHistory_TicketId] ON [helpdesk].[TicketStatusHistory] ([TicketId]);
2025-11-25 21:18:04.628 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserClaims_UserId] ON [security].[UserClaims] ([UserId]);
2025-11-25 21:18:04.628 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserLogins_UserId] ON [security].[UserLogins] ([UserId]);
2025-11-25 21:18:04.630 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UserRoles_RoleId] ON [security].[UserRoles] ([RoleId]);
2025-11-25 21:18:04.631 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [EmailIndex] ON [security].[Users] ([NormalizedEmail]);
2025-11-25 21:18:04.631 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [UserNameIndex] ON [security].[Users] ([NormalizedUserName]) WHERE [NormalizedUserName] IS NOT NULL;
2025-11-25 21:18:04.633 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251121145435_initial', N'9.0.11');
2025-11-25 21:18:04.634 -06:00 [INF] Applying migration '20251121184135_AddRefreshTokenToUserSession'.
2025-11-25 21:18:04.660 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [security].[UserSessions] ADD [RefreshToken] nvarchar(max) NULL;
2025-11-25 21:18:04.660 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [security].[UserSessions] ADD [RefreshTokenExpiresAt] datetime2 NULL;
2025-11-25 21:18:04.661 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251121184135_AddRefreshTokenToUserSession', N'9.0.11');
2025-11-25 21:18:04.661 -06:00 [INF] Applying migration '20251121195907_AddRecursiveCatalogTable'.
2025-11-25 21:18:04.684 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF SCHEMA_ID(N'catalog') IS NULL EXEC(N'CREATE SCHEMA [catalog];');
2025-11-25 21:18:04.687 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [catalog].[Catalogs] (
    [Id] int NOT NULL IDENTITY,
    [Name] nvarchar(100) NOT NULL,
    [Value] nvarchar(200) NULL,
    [ParentId] int NULL,
    [IsActive] bit NOT NULL DEFAULT CAST(1 AS bit),
    [DisplayOrder] int NOT NULL DEFAULT 0,
    [Description] nvarchar(500) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    CONSTRAINT [PK_Catalogs] PRIMARY KEY ([Id]),
    CONSTRAINT [FK_Catalogs_Catalogs_ParentId] FOREIGN KEY ([ParentId]) REFERENCES [catalog].[Catalogs] ([Id]) ON DELETE NO ACTION
);
2025-11-25 21:18:04.688 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Catalogs_Name] ON [catalog].[Catalogs] ([Name]);
2025-11-25 21:18:04.688 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Catalogs_ParentId] ON [catalog].[Catalogs] ([ParentId]);
2025-11-25 21:18:04.691 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_Catalogs_ParentId_DisplayOrder] ON [catalog].[Catalogs] ([ParentId], [DisplayOrder]);
2025-11-25 21:18:04.691 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251121195907_AddRecursiveCatalogTable', N'9.0.11');
2025-11-25 21:18:04.691 -06:00 [INF] Applying migration '20251121204929_ConsolidateRoles'.
2025-11-25 21:18:04.751 -06:00 [INF] Executed DbCommand (36ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [security].[RolePermissions] DROP CONSTRAINT [FK_RolePermissions_Role_RoleId];
2025-11-25 21:18:04.752 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [security].[Role];
2025-11-25 21:18:04.753 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP INDEX [IX_RolePermissions_RoleId] ON [security].[RolePermissions];
2025-11-25 21:18:04.800 -06:00 [INF] Executed DbCommand (47ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var sysname;
SELECT @var = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[security].[RolePermissions]') AND [c].[name] = N'RoleId');
IF @var IS NOT NULL EXEC(N'ALTER TABLE [security].[RolePermissions] DROP CONSTRAINT [' + @var + '];');
ALTER TABLE [security].[RolePermissions] DROP COLUMN [RoleId];
2025-11-25 21:18:04.802 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [security].[RolePermissions] ADD [RoleName] nvarchar(256) NOT NULL DEFAULT N'';
2025-11-25 21:18:04.802 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251121204929_ConsolidateRoles', N'9.0.11');
2025-11-25 21:18:04.802 -06:00 [INF] Applying migration '20251121221845_UpdateRolePermission'.
2025-11-25 21:18:04.838 -06:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @var1 sysname;
SELECT @var1 = [d].[name]
FROM [sys].[default_constraints] [d]
INNER JOIN [sys].[columns] [c] ON [d].[parent_column_id] = [c].[column_id] AND [d].[parent_object_id] = [c].[object_id]
WHERE ([d].[parent_object_id] = OBJECT_ID(N'[security].[RolePermissions]') AND [c].[name] = N'RoleName');
IF @var1 IS NOT NULL EXEC(N'ALTER TABLE [security].[RolePermissions] DROP CONSTRAINT [' + @var1 + '];');
ALTER TABLE [security].[RolePermissions] DROP COLUMN [RoleName];
2025-11-25 21:18:04.839 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [security].[RolePermissions] ADD [RoleId] int NOT NULL DEFAULT 0;
2025-11-25 21:18:04.840 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251121221845_UpdateRolePermission', N'9.0.11');
2025-11-25 21:18:04.840 -06:00 [INF] Applying migration '20251124221721_RemoveCatalogItemsTable'.
2025-11-25 21:18:04.864 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP TABLE [helpdesk].[CatalogItems];
2025-11-25 21:18:04.864 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251124221721_RemoveCatalogItemsTable', N'9.0.11');
2025-11-25 21:18:04.864 -06:00 [INF] Applying migration '20251125215803_AddSoftDeleteToBaseEntity'.
2025-11-25 21:18:04.889 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [security].[UserSessions] ADD [DeletedAt] datetime2 NULL;
2025-11-25 21:18:04.890 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [security].[UserSessions] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-11-25 21:18:04.891 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [helpdesk].[TicketStatusHistory] ADD [DeletedAt] datetime2 NULL;
2025-11-25 21:18:04.893 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [helpdesk].[TicketStatusHistory] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-11-25 21:18:04.894 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [helpdesk].[Tickets] ADD [DeletedAt] datetime2 NULL;
2025-11-25 21:18:04.895 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [helpdesk].[Tickets] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-11-25 21:18:04.896 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [helpdesk].[TicketComments] ADD [DeletedAt] datetime2 NULL;
2025-11-25 21:18:04.898 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [helpdesk].[TicketComments] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-11-25 21:18:04.899 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [helpdesk].[TicketAuditLogs] ADD [DeletedAt] datetime2 NULL;
2025-11-25 21:18:04.900 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [helpdesk].[TicketAuditLogs] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-11-25 21:18:04.901 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [catalog].[Catalogs] ADD [DeletedAt] datetime2 NULL;
2025-11-25 21:18:04.902 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [catalog].[Catalogs] ADD [IsDeleted] bit NOT NULL DEFAULT CAST(0 AS bit);
2025-11-25 21:18:04.902 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251125215803_AddSoftDeleteToBaseEntity', N'9.0.11');
2025-11-25 21:18:04.902 -06:00 [INF] Applying migration '20251126010145_AddSecurityAuditLog'.
2025-11-25 21:18:04.931 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [security].[SecurityAuditLogs] (
    [Id] int NOT NULL IDENTITY,
    [UserId] nvarchar(max) NULL,
    [Method] nvarchar(max) NOT NULL,
    [Path] nvarchar(max) NOT NULL,
    [StatusCode] int NOT NULL,
    [IpAddress] nvarchar(max) NULL,
    [UserAgent] nvarchar(max) NULL,
    [DurationMs] bigint NOT NULL,
    [ErrorMessage] nvarchar(max) NULL,
    [CreatedAt] datetime2 NOT NULL,
    [UpdatedAt] datetime2 NULL,
    [IsDeleted] bit NOT NULL,
    [DeletedAt] datetime2 NULL,
    CONSTRAINT [PK_SecurityAuditLogs] PRIMARY KEY ([Id])
);
2025-11-25 21:18:04.932 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20251126010145_AddSecurityAuditLog', N'9.0.11');
2025-11-25 21:18:04.937 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 21:18:05.234 -06:00 [INF] Executed DbCommand (13ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:18:05.241 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:18:05.370 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Roles] ([ConcurrencyStamp], [Name], [NormalizedName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-11-25 21:18:05.397 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:18:05.398 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:18:05.402 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Roles] ([ConcurrencyStamp], [Name], [NormalizedName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-11-25 21:18:05.404 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:18:05.404 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:18:05.406 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (Size = 256), @p2='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Roles] ([ConcurrencyStamp], [Name], [NormalizedName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2);
2025-11-25 21:18:05.417 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 21:18:05.426 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 21:18:05.445 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.454 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.455 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.456 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.457 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.458 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.458 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.459 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.464 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.465 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.465 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.466 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.478 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 100), @p1='?' (DbType = Int32), @p2='?' (Size = 100), @p3='?' (DbType = Int32), @p4='?' (Size = 100), @p5='?' (DbType = Int32), @p6='?' (Size = 100), @p7='?' (DbType = Int32), @p8='?' (Size = 100), @p9='?' (DbType = Int32), @p10='?' (Size = 100), @p11='?' (DbType = Int32), @p12='?' (Size = 100), @p13='?' (DbType = Int32), @p14='?' (Size = 100), @p15='?' (DbType = Int32), @p16='?' (Size = 100), @p17='?' (DbType = Int32), @p18='?' (Size = 100), @p19='?' (DbType = Int32), @p20='?' (Size = 100), @p21='?' (DbType = Int32), @p22='?' (Size = 100), @p23='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [security].[RolePermissions] USING (
VALUES (@p0, @p1, 0),
(@p2, @p3, 1),
(@p4, @p5, 2),
(@p6, @p7, 3),
(@p8, @p9, 4),
(@p10, @p11, 5),
(@p12, @p13, 6),
(@p14, @p15, 7),
(@p16, @p17, 8),
(@p18, @p19, 9),
(@p20, @p21, 10),
(@p22, @p23, 11)) AS i ([Permission], [RoleId], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([Permission], [RoleId])
VALUES (i.[Permission], i.[RoleId])
OUTPUT INSERTED.[Id], i._Position;
2025-11-25 21:18:05.493 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:18:05.592 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 21:18:05.604 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:18:05.651 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Users] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-25 21:18:05.662 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:18:05.691 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:18:05.693 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:18:05.694 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:18:05.697 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:18:05.710 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 21:18:05.715 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:18:05.733 -06:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p17='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p18='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 200), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [security].[UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [security].[Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 21:18:05.737 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:18:05.819 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 21:18:05.820 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:18:05.823 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (Size = 4000), @p2='?' (Size = 256), @p3='?' (DbType = Boolean), @p4='?' (Size = 200), @p5='?' (DbType = Boolean), @p6='?' (DbType = DateTimeOffset), @p7='?' (Size = 256), @p8='?' (Size = 256), @p9='?' (Size = 4000), @p10='?' (Size = 4000), @p11='?' (DbType = Boolean), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[Users] ([AccessFailedCount], [ConcurrencyStamp], [Email], [EmailConfirmed], [FullName], [LockoutEnabled], [LockoutEnd], [NormalizedEmail], [NormalizedUserName], [PasswordHash], [PhoneNumber], [PhoneNumberConfirmed], [SecurityStamp], [TwoFactorEnabled], [UserName])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14);
2025-11-25 21:18:05.825 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:18:05.827 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:18:05.828 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:18:05.829 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:18:05.829 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:18:05.831 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-11-25 21:18:05.832 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:18:05.833 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p17='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (Size = 4000), @p18='?' (Size = 4000), @p4='?' (Size = 256), @p5='?' (DbType = Boolean), @p6='?' (Size = 200), @p7='?' (DbType = Boolean), @p8='?' (DbType = DateTimeOffset), @p9='?' (Size = 256), @p10='?' (Size = 256), @p11='?' (Size = 4000), @p12='?' (Size = 4000), @p13='?' (DbType = Boolean), @p14='?' (Size = 4000), @p15='?' (DbType = Boolean), @p16='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [security].[UserRoles] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [security].[Users] SET [AccessFailedCount] = @p2, [ConcurrencyStamp] = @p3, [Email] = @p4, [EmailConfirmed] = @p5, [FullName] = @p6, [LockoutEnabled] = @p7, [LockoutEnd] = @p8, [NormalizedEmail] = @p9, [NormalizedUserName] = @p10, [PasswordHash] = @p11, [PhoneNumber] = @p12, [PhoneNumberConfirmed] = @p13, [SecurityStamp] = @p14, [TwoFactorEnabled] = @p15, [UserName] = @p16
OUTPUT 1
WHERE [Id] = @p17 AND [ConcurrencyStamp] = @p18;
2025-11-25 21:18:05.840 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:18:05.889 -06:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 500), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 100), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 200), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 500), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 100), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime2), @p17='?' (Size = 200), @p18='?' (DbType = DateTime2), @p19='?' (DbType = DateTime2), @p20='?' (Size = 500), @p21='?' (DbType = Int32), @p22='?' (DbType = Boolean), @p23='?' (Size = 100), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 200), @p27='?' (DbType = DateTime2), @p28='?' (DbType = DateTime2), @p29='?' (Size = 500), @p30='?' (DbType = Int32), @p31='?' (DbType = Boolean), @p32='?' (Size = 100), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime2), @p35='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [catalog].[Catalogs] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 3)) AS i ([CreatedAt], [DeletedAt], [Description], [DisplayOrder], [IsDeleted], [Name], [ParentId], [UpdatedAt], [Value], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [DeletedAt], [Description], [DisplayOrder], [IsDeleted], [Name], [ParentId], [UpdatedAt], [Value])
VALUES (i.[CreatedAt], i.[DeletedAt], i.[Description], i.[DisplayOrder], i.[IsDeleted], i.[Name], i.[ParentId], i.[UpdatedAt], i.[Value])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-11-25 21:18:05.926 -06:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (Size = 500), @p3='?' (DbType = Int32), @p4='?' (DbType = Boolean), @p5='?' (Size = 100), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime2), @p8='?' (Size = 200), @p9='?' (DbType = DateTime2), @p10='?' (DbType = DateTime2), @p11='?' (Size = 500), @p12='?' (DbType = Int32), @p13='?' (DbType = Boolean), @p14='?' (Size = 100), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime2), @p17='?' (Size = 200), @p18='?' (DbType = DateTime2), @p19='?' (DbType = DateTime2), @p20='?' (Size = 500), @p21='?' (DbType = Int32), @p22='?' (DbType = Boolean), @p23='?' (Size = 100), @p24='?' (DbType = Int32), @p25='?' (DbType = DateTime2), @p26='?' (Size = 200), @p27='?' (DbType = DateTime2), @p28='?' (DbType = DateTime2), @p29='?' (Size = 500), @p30='?' (DbType = Int32), @p31='?' (DbType = Boolean), @p32='?' (Size = 100), @p33='?' (DbType = Int32), @p34='?' (DbType = DateTime2), @p35='?' (Size = 200), @p36='?' (DbType = DateTime2), @p37='?' (DbType = DateTime2), @p38='?' (Size = 500), @p39='?' (DbType = Int32), @p40='?' (DbType = Boolean), @p41='?' (Size = 100), @p42='?' (DbType = Int32), @p43='?' (DbType = DateTime2), @p44='?' (Size = 200), @p45='?' (DbType = DateTime2), @p46='?' (DbType = DateTime2), @p47='?' (Size = 500), @p48='?' (DbType = Int32), @p49='?' (DbType = Boolean), @p50='?' (Size = 100), @p51='?' (DbType = Int32), @p52='?' (DbType = DateTime2), @p53='?' (Size = 200), @p54='?' (DbType = DateTime2), @p55='?' (DbType = DateTime2), @p56='?' (Size = 500), @p57='?' (DbType = Int32), @p58='?' (DbType = Boolean), @p59='?' (Size = 100), @p60='?' (DbType = Int32), @p61='?' (DbType = DateTime2), @p62='?' (Size = 200), @p63='?' (DbType = DateTime2), @p64='?' (DbType = DateTime2), @p65='?' (Size = 500), @p66='?' (DbType = Int32), @p67='?' (DbType = Boolean), @p68='?' (Size = 100), @p69='?' (DbType = Int32), @p70='?' (DbType = DateTime2), @p71='?' (Size = 200), @p72='?' (DbType = DateTime2), @p73='?' (DbType = DateTime2), @p74='?' (Size = 500), @p75='?' (DbType = Int32), @p76='?' (DbType = Boolean), @p77='?' (Size = 100), @p78='?' (DbType = Int32), @p79='?' (DbType = DateTime2), @p80='?' (Size = 200), @p81='?' (DbType = DateTime2), @p82='?' (DbType = DateTime2), @p83='?' (Size = 500), @p84='?' (DbType = Int32), @p85='?' (DbType = Boolean), @p86='?' (Size = 100), @p87='?' (DbType = Int32), @p88='?' (DbType = DateTime2), @p89='?' (Size = 200), @p90='?' (DbType = DateTime2), @p91='?' (DbType = DateTime2), @p92='?' (Size = 500), @p93='?' (DbType = Int32), @p94='?' (DbType = Boolean), @p95='?' (Size = 100), @p96='?' (DbType = Int32), @p97='?' (DbType = DateTime2), @p98='?' (Size = 200), @p99='?' (DbType = DateTime2), @p100='?' (DbType = DateTime2), @p101='?' (Size = 500), @p102='?' (DbType = Int32), @p103='?' (DbType = Boolean), @p104='?' (Size = 100), @p105='?' (DbType = Int32), @p106='?' (DbType = DateTime2), @p107='?' (Size = 200), @p108='?' (DbType = DateTime2), @p109='?' (DbType = DateTime2), @p110='?' (Size = 500), @p111='?' (DbType = Int32), @p112='?' (DbType = Boolean), @p113='?' (Size = 100), @p114='?' (DbType = Int32), @p115='?' (DbType = DateTime2), @p116='?' (Size = 200), @p117='?' (DbType = DateTime2), @p118='?' (DbType = DateTime2), @p119='?' (Size = 500), @p120='?' (DbType = Int32), @p121='?' (DbType = Boolean), @p122='?' (Size = 100), @p123='?' (DbType = Int32), @p124='?' (DbType = DateTime2), @p125='?' (Size = 200), @p126='?' (DbType = DateTime2), @p127='?' (DbType = DateTime2), @p128='?' (Size = 500), @p129='?' (DbType = Int32), @p130='?' (DbType = Boolean), @p131='?' (Size = 100), @p132='?' (DbType = Int32), @p133='?' (DbType = DateTime2), @p134='?' (Size = 200), @p135='?' (DbType = DateTime2), @p136='?' (DbType = DateTime2), @p137='?' (Size = 500), @p138='?' (DbType = Int32), @p139='?' (DbType = Boolean), @p140='?' (Size = 100), @p141='?' (DbType = Int32), @p142='?' (DbType = DateTime2), @p143='?' (Size = 200), @p144='?' (DbType = DateTime2), @p145='?' (DbType = DateTime2), @p146='?' (Size = 500), @p147='?' (DbType = Int32), @p148='?' (DbType = Boolean), @p149='?' (Size = 100), @p150='?' (DbType = Int32), @p151='?' (DbType = DateTime2), @p152='?' (Size = 200), @p153='?' (DbType = DateTime2), @p154='?' (DbType = DateTime2), @p155='?' (Size = 500), @p156='?' (DbType = Int32), @p157='?' (DbType = Boolean), @p158='?' (Size = 100), @p159='?' (DbType = Int32), @p160='?' (DbType = DateTime2), @p161='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
MERGE [catalog].[Catalogs] USING (
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, 0),
(@p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16, @p17, 1),
(@p18, @p19, @p20, @p21, @p22, @p23, @p24, @p25, @p26, 2),
(@p27, @p28, @p29, @p30, @p31, @p32, @p33, @p34, @p35, 3),
(@p36, @p37, @p38, @p39, @p40, @p41, @p42, @p43, @p44, 4),
(@p45, @p46, @p47, @p48, @p49, @p50, @p51, @p52, @p53, 5),
(@p54, @p55, @p56, @p57, @p58, @p59, @p60, @p61, @p62, 6),
(@p63, @p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71, 7),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79, @p80, 8),
(@p81, @p82, @p83, @p84, @p85, @p86, @p87, @p88, @p89, 9),
(@p90, @p91, @p92, @p93, @p94, @p95, @p96, @p97, @p98, 10),
(@p99, @p100, @p101, @p102, @p103, @p104, @p105, @p106, @p107, 11),
(@p108, @p109, @p110, @p111, @p112, @p113, @p114, @p115, @p116, 12),
(@p117, @p118, @p119, @p120, @p121, @p122, @p123, @p124, @p125, 13),
(@p126, @p127, @p128, @p129, @p130, @p131, @p132, @p133, @p134, 14),
(@p135, @p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143, 15),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151, @p152, 16),
(@p153, @p154, @p155, @p156, @p157, @p158, @p159, @p160, @p161, 17)) AS i ([CreatedAt], [DeletedAt], [Description], [DisplayOrder], [IsDeleted], [Name], [ParentId], [UpdatedAt], [Value], _Position) ON 1=0
WHEN NOT MATCHED THEN
INSERT ([CreatedAt], [DeletedAt], [Description], [DisplayOrder], [IsDeleted], [Name], [ParentId], [UpdatedAt], [Value])
VALUES (i.[CreatedAt], i.[DeletedAt], i.[Description], i.[DisplayOrder], i.[IsDeleted], i.[Name], i.[ParentId], i.[UpdatedAt], i.[Value])
OUTPUT INSERTED.[Id], INSERTED.[IsActive], i._Position;
2025-11-25 21:18:05.930 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 21:18:06.274 -06:00 [INF] Now listening on: https://localhost:62590
2025-11-25 21:18:06.274 -06:00 [INF] Now listening on: http://localhost:62591
2025-11-25 21:18:06.276 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 21:18:06.276 -06:00 [INF] Hosting environment: Development
2025-11-25 21:18:06.276 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 21:18:06.352 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 21:18:06.527 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 147.6558 ms
2025-11-25 21:18:06.534 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 189.1598ms
2025-11-25 21:18:17.958 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/auth/user-info - null null
2025-11-25 21:18:17.967 -06:00 [INF] HTTP GET /api/auth/user-info responded 307 in 5.6134 ms
2025-11-25 21:18:17.967 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/auth/user-info - 307 0 null 9.4497ms
2025-11-25 21:18:18.017 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/auth/user-info - null null
2025-11-25 21:18:18.020 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:18:18.049 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:18:18.052 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:18:18.052 -06:00 [INF] HTTP GET /api/auth/user-info responded 401 in 33.2031 ms
2025-11-25 21:18:18.053 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/auth/user-info - 401 0 null 36.5257ms
2025-11-25 21:18:29.278 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/auth/user-info - null null
2025-11-25 21:18:29.278 -06:00 [INF] HTTP GET /api/auth/user-info responded 307 in 0.1561 ms
2025-11-25 21:18:29.279 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/auth/user-info - 307 0 null 0.6152ms
2025-11-25 21:18:29.296 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/auth/user-info - null null
2025-11-25 21:18:29.296 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:18:29.303 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:18:29.304 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:18:29.304 -06:00 [INF] HTTP GET /api/auth/user-info responded 401 in 7.5125 ms
2025-11-25 21:18:29.304 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/auth/user-info - 401 0 null 8.2919ms
2025-11-25 21:18:40.103 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/auth/logout - null 0
2025-11-25 21:18:40.103 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:18:40.103 -06:00 [INF] HTTP POST /api/auth/logout responded 307 in 0.2313 ms
2025-11-25 21:18:40.104 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/auth/logout - 307 0 null 1.0999ms
2025-11-25 21:18:40.108 -06:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/auth/logout - null 0
2025-11-25 21:18:40.108 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:18:40.113 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:18:40.113 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:18:40.113 -06:00 [INF] HTTP POST /api/auth/logout responded 401 in 5.1970 ms
2025-11-25 21:18:40.113 -06:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/auth/logout - 401 0 null 5.7122ms
2025-11-25 21:27:43.353 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 21:27:44.156 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 21:27:45.081 -06:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:27:45.096 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 21:27:45.124 -06:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 21:27:45.201 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 21:27:45.219 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:27:45.223 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 21:27:45.232 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 21:27:45.244 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 21:27:45.250 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 21:27:45.532 -06:00 [INF] Executed DbCommand (11ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:27:45.583 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:27:45.589 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:27:45.607 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 21:27:45.620 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 21:27:45.666 -06:00 [INF] Executed DbCommand (10ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.675 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.682 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.688 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.693 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.700 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.706 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.713 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.726 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.733 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.738 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.743 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.782 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:27:45.824 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:27:45.858 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:27:45.870 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:27:45.875 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:27:45.879 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:27:45.890 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:27:45.897 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 21:27:46.016 -06:00 [INF] Now listening on: http://localhost:5022
2025-11-25 21:27:46.019 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 21:27:46.020 -06:00 [INF] Hosting environment: Development
2025-11-25 21:27:46.021 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 21:27:52.154 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - null null
2025-11-25 21:27:52.342 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 150.8923 ms
2025-11-25 21:27:52.350 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 197.425ms
2025-11-25 21:28:23.006 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5022/api/auth/login - application/json 62
2025-11-25 21:28:23.014 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:28:23.023 -06:00 [WRN] Failed to determine the https port for redirect.
2025-11-25 21:28:23.062 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 21:28:23.076 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 21:28:23.118 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) - Validation state: "Valid"
2025-11-25 21:28:23.145 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:28:23.281 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 21:28:23.422 -06:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 200), @p10='?' (Size = 500), @p11='?' (Size = 1000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [DeletedAt], [IsActiveSession], [IsDeleted], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-25 21:28:23.450 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 326.4663ms.
2025-11-25 21:28:23.458 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 21:28:23.468 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 385.414ms
2025-11-25 21:28:23.471 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 21:28:23.506 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[SecurityAuditLogs] ([CreatedAt], [DeletedAt], [DurationMs], [ErrorMessage], [IpAddress], [IsDeleted], [Method], [Path], [StatusCode], [UpdatedAt], [UserAgent], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-25 21:28:23.515 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 502.2945 ms
2025-11-25 21:28:23.522 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5022/api/auth/login - 200 null application/json; charset=utf-8 515.995ms
2025-11-25 21:28:45.611 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/.well-known/appspecific/com.chrome.devtools.json - null null
2025-11-25 21:28:45.623 -06:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 8.4914 ms
2025-11-25 21:28:45.627 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 15.9073ms
2025-11-25 21:28:45.631 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-11-25 21:28:53.792 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/index.html - null null
2025-11-25 21:28:53.858 -06:00 [INF] HTTP GET /index.html responded 200 in 59.2831 ms
2025-11-25 21:28:53.861 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/index.html - 200 null text/html;charset=utf-8 69.1781ms
2025-11-25 21:28:53.934 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/.well-known/appspecific/com.chrome.devtools.json - null null
2025-11-25 21:28:53.943 -06:00 [INF] HTTP GET /.well-known/appspecific/com.chrome.devtools.json responded 404 in 4.6073 ms
2025-11-25 21:28:53.947 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/.well-known/appspecific/com.chrome.devtools.json - 404 0 null 12.2783ms
2025-11-25 21:28:53.954 -06:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5022/.well-known/appspecific/com.chrome.devtools.json, Response status code: 404
2025-11-25 21:28:54.522 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - null null
2025-11-25 21:28:54.552 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 22.0143 ms
2025-11-25 21:28:54.556 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.0072ms
2025-11-25 21:29:04.583 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/auth/user-info - null null
2025-11-25 21:29:04.594 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:29:04.598 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:29:04.600 -06:00 [INF] HTTP GET /api/auth/user-info responded 401 in 11.6076 ms
2025-11-25 21:29:04.604 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/auth/user-info - 401 0 null 20.956ms
2025-11-25 21:29:23.558 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/Catalogs - null null
2025-11-25 21:29:23.565 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:29:23.568 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:29:23.569 -06:00 [INF] HTTP GET /api/Catalogs responded 401 in 6.7127 ms
2025-11-25 21:29:23.572 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/Catalogs - 401 0 null 13.3027ms
2025-11-25 21:29:26.130 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5022/api/Catalogs - null null
2025-11-25 21:29:26.141 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:29:26.143 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:29:26.145 -06:00 [INF] HTTP GET /api/Catalogs responded 401 in 10.9253 ms
2025-11-25 21:29:26.147 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5022/api/Catalogs - 401 0 null 17.3546ms
2025-11-25 21:32:41.095 -06:00 [INF] Application is shutting down...
2025-11-25 21:42:56.099 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 21:42:56.985 -06:00 [INF] User profile is available. Using 'C:\Users\marvin.gonzalez\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-25 21:42:58.088 -06:00 [INF] Executed DbCommand (25ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:42:58.102 -06:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-11-25 21:42:58.125 -06:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-11-25 21:42:58.197 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-11-25 21:42:58.218 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-11-25 21:42:58.219 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-11-25 21:42:58.224 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-11-25 21:42:58.235 -06:00 [INF] No migrations were applied. The database is already up to date.
2025-11-25 21:42:58.239 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-11-25 21:42:58.613 -06:00 [INF] Executed DbCommand (16ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:42:58.663 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:42:58.665 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-11-25 21:42:58.674 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Admin'
2025-11-25 21:42:58.680 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[Name] = N'Support'
2025-11-25 21:42:58.700 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.702 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.703 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.704 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.704 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.705 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.706 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.707 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals1_adminRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals1_adminRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.711 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.712 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.712 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.713 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__8__locals2_supportRole_Id_0='?' (DbType = Int32), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        WHERE [r].[RoleId] = @__8__locals2_supportRole_Id_0 AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.742 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:42:58.788 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:42:58.826 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:42:58.836 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:42:58.839 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedRoleName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [r].[Id], [r].[ConcurrencyStamp], [r].[Name], [r].[NormalizedName]
FROM [security].[Roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedRoleName_0
2025-11-25 21:42:58.840 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[UserId], [u].[RoleId]
FROM [security].[UserRoles] AS [u]
WHERE [u].[UserId] = @__p_0 AND [u].[RoleId] = @__p_1
2025-11-25 21:42:58.845 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [catalog].[Catalogs] AS [c]) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 21:42:58.849 -06:00 [INF] HelpDesk API iniciado correctamente
2025-11-25 21:42:59.268 -06:00 [INF] Now listening on: https://localhost:64680
2025-11-25 21:42:59.269 -06:00 [INF] Now listening on: http://localhost:64681
2025-11-25 21:42:59.271 -06:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-25 21:42:59.271 -06:00 [INF] Hosting environment: Development
2025-11-25 21:42:59.271 -06:00 [INF] Content root path: D:\REPOSITORY\HelpDesk\HelpDesk.API
2025-11-25 21:43:08.141 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 21:43:08.283 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 113.2022 ms
2025-11-25 21:43:08.290 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 158.5695ms
2025-11-25 21:43:36.720 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/auth/login - application/json 62
2025-11-25 21:43:36.724 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:43:36.730 -06:00 [INF] HTTP POST /api/auth/login responded 307 in 6.8750 ms
2025-11-25 21:43:36.731 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/auth/login - 307 0 null 10.7454ms
2025-11-25 21:43:36.777 -06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7276/api/auth/login - null null
2025-11-25 21:43:36.779 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:43:36.779 -06:00 [INF] HTTP OPTIONS /api/auth/login responded 204 in 1.2068 ms
2025-11-25 21:43:36.780 -06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7276/api/auth/login - 204 null null 3.3673ms
2025-11-25 21:43:36.784 -06:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/auth/login - application/json 62
2025-11-25 21:43:36.784 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:43:36.814 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 21:43:36.827 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 21:43:36.861 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) - Validation state: "Valid"
2025-11-25 21:43:36.885 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 21:43:37.010 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 21:43:37.143 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 200), @p10='?' (Size = 500), @p11='?' (Size = 1000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [DeletedAt], [IsActiveSession], [IsDeleted], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-25 21:43:37.164 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 299.727ms.
2025-11-25 21:43:37.169 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 21:43:37.175 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 345.2838ms
2025-11-25 21:43:37.176 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 21:43:37.207 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[SecurityAuditLogs] ([CreatedAt], [DeletedAt], [DurationMs], [ErrorMessage], [IpAddress], [IsDeleted], [Method], [Path], [StatusCode], [UpdatedAt], [UserAgent], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-25 21:43:37.211 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 426.5900 ms
2025-11-25 21:43:37.214 -06:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/auth/login - 200 null application/json; charset=utf-8 430.181ms
2025-11-25 21:45:19.564 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/auth/user-info - null null
2025-11-25 21:45:19.565 -06:00 [INF] HTTP GET /api/auth/user-info responded 307 in 0.6212 ms
2025-11-25 21:45:19.565 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/auth/user-info - 307 0 null 1.6725ms
2025-11-25 21:45:19.569 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/auth/user-info - null null
2025-11-25 21:45:19.570 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:45:19.577 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:45:19.580 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:45:19.581 -06:00 [INF] HTTP GET /api/auth/user-info responded 401 in 10.9466 ms
2025-11-25 21:45:19.581 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/auth/user-info - 401 0 null 11.5377ms
2025-11-25 21:45:36.612 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Catalogs - null null
2025-11-25 21:45:36.613 -06:00 [INF] HTTP GET /api/Catalogs responded 307 in 0.1242 ms
2025-11-25 21:45:36.613 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Catalogs - 307 0 null 0.9425ms
2025-11-25 21:45:36.619 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Catalogs - null null
2025-11-25 21:45:36.619 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:45:36.622 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:45:36.622 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:45:36.623 -06:00 [INF] HTTP GET /api/Catalogs responded 401 in 3.6905 ms
2025-11-25 21:45:36.623 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Catalogs - 401 0 null 4.1428ms
2025-11-25 21:50:25.626 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/index.html - null null
2025-11-25 21:50:25.669 -06:00 [INF] HTTP GET /index.html responded 200 in 42.6230 ms
2025-11-25 21:50:25.669 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/index.html - 200 null text/html;charset=utf-8 43.2343ms
2025-11-25 21:50:25.952 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 21:50:25.967 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 15.1516 ms
2025-11-25 21:50:25.967 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 15.6357ms
2025-11-25 21:50:30.903 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Catalogs - null null
2025-11-25 21:50:30.903 -06:00 [INF] HTTP GET /api/Catalogs responded 307 in 0.1423 ms
2025-11-25 21:50:30.903 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Catalogs - 307 0 null 0.6189ms
2025-11-25 21:50:30.929 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Catalogs - null null
2025-11-25 21:50:30.929 -06:00 [INF] CORS policy execution successful.
2025-11-25 21:50:30.933 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-25 21:50:30.933 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 21:50:30.933 -06:00 [INF] HTTP GET /api/Catalogs responded 401 in 4.5473 ms
2025-11-25 21:50:30.933 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Catalogs - 401 0 null 4.9203ms
2025-11-25 22:15:40.022 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/ - null null
2025-11-25 22:15:40.023 -06:00 [INF] HTTP GET / responded 301 in 0.4871 ms
2025-11-25 22:15:40.023 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/ - 301 0 null 1.2796ms
2025-11-25 22:15:40.054 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/index.html - null null
2025-11-25 22:15:40.055 -06:00 [INF] HTTP GET /index.html responded 200 in 1.0144 ms
2025-11-25 22:15:40.055 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/index.html - 200 null text/html;charset=utf-8 1.4578ms
2025-11-25 22:15:40.104 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger-ui.css - null null
2025-11-25 22:15:40.113 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/index.css - null null
2025-11-25 22:15:40.114 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger-ui-bundle.js - null null
2025-11-25 22:15:40.114 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger-ui-standalone-preset.js - null null
2025-11-25 22:15:40.115 -06:00 [INF] HTTP GET /index.css responded 200 in 1.8474 ms
2025-11-25 22:15:40.116 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/index.css - 200 152 text/css 2.3242ms
2025-11-25 22:15:40.121 -06:00 [INF] HTTP GET /swagger-ui.css responded 200 in 17.2450 ms
2025-11-25 22:15:40.121 -06:00 [INF] HTTP GET /swagger-ui-standalone-preset.js responded 200 in 7.5325 ms
2025-11-25 22:15:40.122 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger-ui-standalone-preset.js - 200 77352 text/javascript 7.9859ms
2025-11-25 22:15:40.122 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger-ui.css - 200 23647 text/css 17.7884ms
2025-11-25 22:15:40.125 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/index.js - null null
2025-11-25 22:15:40.126 -06:00 [INF] HTTP GET /index.js responded 200 in 0.5340 ms
2025-11-25 22:15:40.126 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/index.js - 200 null application/javascript;charset=utf-8 1.0278ms
2025-11-25 22:15:40.139 -06:00 [INF] HTTP GET /swagger-ui-bundle.js responded 200 in 25.8378 ms
2025-11-25 22:15:40.140 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger-ui-bundle.js - 200 424767 text/javascript 26.1772ms
2025-11-25 22:15:40.422 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - null null
2025-11-25 22:15:40.431 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 9.0705 ms
2025-11-25 22:15:40.432 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 9.4798ms
2025-11-25 22:15:40.457 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/favicon-32x32.png - null null
2025-11-25 22:15:40.458 -06:00 [INF] HTTP GET /favicon-32x32.png responded 200 in 0.9408 ms
2025-11-25 22:15:40.458 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/favicon-32x32.png - 200 628 image/png 1.2641ms
2025-11-25 22:16:23.253 -06:00 [INF] Request starting HTTP/1.1 POST http://localhost:5021/api/auth/login - application/json 62
2025-11-25 22:16:23.254 -06:00 [INF] CORS policy execution successful.
2025-11-25 22:16:23.254 -06:00 [INF] HTTP POST /api/auth/login responded 307 in 0.2020 ms
2025-11-25 22:16:23.254 -06:00 [INF] Request finished HTTP/1.1 POST http://localhost:5021/api/auth/login - 307 0 null 0.6846ms
2025-11-25 22:16:23.261 -06:00 [INF] Request starting HTTP/2 OPTIONS https://localhost:7276/api/auth/login - null null
2025-11-25 22:16:23.261 -06:00 [INF] CORS policy execution successful.
2025-11-25 22:16:23.261 -06:00 [INF] HTTP OPTIONS /api/auth/login responded 204 in 0.2774 ms
2025-11-25 22:16:23.262 -06:00 [INF] Request finished HTTP/2 OPTIONS https://localhost:7276/api/auth/login - 204 null null 0.6179ms
2025-11-25 22:16:23.264 -06:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/auth/login - application/json 62
2025-11-25 22:16:23.264 -06:00 [INF] CORS policy execution successful.
2025-11-25 22:16:23.265 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 22:16:23.266 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 22:16:23.268 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) - Validation state: "Valid"
2025-11-25 22:16:23.320 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 22:16:23.406 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 22:16:23.412 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 200), @p10='?' (Size = 500), @p11='?' (Size = 1000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [DeletedAt], [IsActiveSession], [IsDeleted], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-25 22:16:23.412 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 143.7436ms.
2025-11-25 22:16:23.413 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 22:16:23.413 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 147.4066ms
2025-11-25 22:16:23.413 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 22:16:23.416 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[SecurityAuditLogs] ([CreatedAt], [DeletedAt], [DurationMs], [ErrorMessage], [IpAddress], [IsDeleted], [Method], [Path], [StatusCode], [UpdatedAt], [UserAgent], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-25 22:16:23.417 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 152.6948 ms
2025-11-25 22:16:23.417 -06:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/auth/login - 200 null application/json; charset=utf-8 153.2278ms
2025-11-25 22:17:08.247 -06:00 [INF] Request starting HTTP/2 POST https://localhost:7276/api/auth/login - application/json 62
2025-11-25 22:17:08.248 -06:00 [INF] CORS policy execution successful.
2025-11-25 22:17:08.250 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 22:17:08.250 -06:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(LoginRequest) on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 22:17:08.268 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) - Validation state: "Valid"
2025-11-25 22:17:08.270 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 22:17:08.357 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 22:17:08.359 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Boolean), @p3='?' (DbType = Boolean), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime2), @p6='?' (Size = 200), @p7='?' (Size = 1000), @p8='?' (DbType = DateTime2), @p9='?' (Size = 200), @p10='?' (Size = 500), @p11='?' (Size = 1000), @p12='?' (Size = 4000), @p13='?' (DbType = DateTime2), @p14='?' (DbType = DateTime2), @p15='?' (DbType = DateTime2), @p16='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[UserSessions] ([CreatedAt], [DeletedAt], [IsActiveSession], [IsDeleted], [JwtId], [LoginAt], [LoginIpAddress], [LoginUserAgent], [LogoutAt], [LogoutIpAddress], [LogoutReason], [LogoutUserAgent], [RefreshToken], [RefreshTokenExpiresAt], [TokenExpiresAt], [UpdatedAt], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
2025-11-25 22:17:08.360 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 92.1288ms.
2025-11-25 22:17:08.360 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.AuthResult'.
2025-11-25 22:17:08.360 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API) in 109.5651ms
2025-11-25 22:17:08.360 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.Login (HelpDesk.API)'
2025-11-25 22:17:08.363 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[SecurityAuditLogs] ([CreatedAt], [DeletedAt], [DurationMs], [ErrorMessage], [IpAddress], [IsDeleted], [Method], [Path], [StatusCode], [UpdatedAt], [UserAgent], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-25 22:17:08.363 -06:00 [INF] HTTP POST /api/auth/login responded 200 in 115.7790 ms
2025-11-25 22:17:08.364 -06:00 [INF] Request finished HTTP/2 POST https://localhost:7276/api/auth/login - 200 null application/json; charset=utf-8 116.6906ms
2025-11-25 22:17:33.353 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/auth/user-info - null null
2025-11-25 22:17:33.418 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__jti_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DeletedAt], [u].[IsActiveSession], [u].[IsDeleted], [u].[JwtId], [u].[LoginAt], [u].[LoginIpAddress], [u].[LoginUserAgent], [u].[LogoutAt], [u].[LogoutIpAddress], [u].[LogoutReason], [u].[LogoutUserAgent], [u].[RefreshToken], [u].[RefreshTokenExpiresAt], [u].[TokenExpiresAt], [u].[UpdatedAt], [u].[UserId]
FROM [security].[UserSessions] AS [u]
WHERE [u].[JwtId] = @__jti_0
2025-11-25 22:17:33.425 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuthController.GetCurrentUser (HelpDesk.API)'
2025-11-25 22:17:33.430 -06:00 [INF] Route matched with {action = "GetCurrentUser", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUser() on controller HelpDesk.Api.Controllers.AuthController (HelpDesk.API).
2025-11-25 22:17:33.430 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuthController.GetCurrentUser (HelpDesk.API) - Validation state: "Valid"
2025-11-25 22:17:33.436 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[Email], [u].[EmailConfirmed], [u].[FullName], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [security].[Users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-11-25 22:17:33.439 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 22:17:33.440 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuthController.GetCurrentUser (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 9.638ms.
2025-11-25 22:17:33.440 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.UserDto'.
2025-11-25 22:17:33.453 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuthController.GetCurrentUser (HelpDesk.API) in 22.7403ms
2025-11-25 22:17:33.453 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuthController.GetCurrentUser (HelpDesk.API)'
2025-11-25 22:17:33.456 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = DateTime2), @p2='?' (DbType = Int64), @p3='?' (Size = 4000), @p4='?' (Size = 4000), @p5='?' (DbType = Boolean), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Int32), @p9='?' (DbType = DateTime2), @p10='?' (Size = 4000), @p11='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [security].[SecurityAuditLogs] ([CreatedAt], [DeletedAt], [DurationMs], [ErrorMessage], [IpAddress], [IsDeleted], [Method], [Path], [StatusCode], [UpdatedAt], [UserAgent], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-25 22:17:33.457 -06:00 [INF] HTTP GET /api/auth/user-info responded 200 in 103.6852 ms
2025-11-25 22:17:33.457 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/auth/user-info - 200 null application/json; charset=utf-8 104.135ms
2025-11-25 22:17:54.232 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/audit/security?Page=1&PageSize=10 - null null
2025-11-25 22:17:54.235 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[@__jti_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DeletedAt], [u].[IsActiveSession], [u].[IsDeleted], [u].[JwtId], [u].[LoginAt], [u].[LoginIpAddress], [u].[LoginUserAgent], [u].[LogoutAt], [u].[LogoutIpAddress], [u].[LogoutReason], [u].[LogoutUserAgent], [u].[RefreshToken], [u].[RefreshTokenExpiresAt], [u].[TokenExpiresAt], [u].[UpdatedAt], [u].[UserId]
FROM [security].[UserSessions] AS [u]
WHERE [u].[JwtId] = @__jti_0
2025-11-25 22:17:54.292 -06:00 [INF] Executed DbCommand (7ms) [Parameters=[@__roleNames_0='?' (Size = 4000), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        INNER JOIN [security].[Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
        WHERE [r0].[Name] IN (
            SELECT [r1].[value]
            FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(256) '$') AS [r1]
        ) AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 22:17:54.294 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.AuditController.GetSecurityLogs (HelpDesk.API)'
2025-11-25 22:17:54.302 -06:00 [INF] Route matched with {action = "GetSecurityLogs", controller = "Audit"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSecurityLogs(HelpDesk.Application.DTOs.Audit.SecurityAuditFilterRequest) on controller HelpDesk.Api.Controllers.AuditController (HelpDesk.API).
2025-11-25 22:17:54.304 -06:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-25 22:17:54.311 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.AuditController.GetSecurityLogs (HelpDesk.API) - Validation state: "Valid"
2025-11-25 22:17:54.332 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [security].[SecurityAuditLogs] AS [s]
2025-11-25 22:17:54.343 -06:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[UserId], [s].[Method], [s].[Path], [s].[StatusCode], [s].[IpAddress], [s].[UserAgent], [s].[DurationMs], [s].[ErrorMessage], [s].[CreatedAt]
FROM [security].[SecurityAuditLogs] AS [s]
ORDER BY [s].[CreatedAt] DESC
OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
2025-11-25 22:17:54.345 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.AuditController.GetSecurityLogs (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 33.4348ms.
2025-11-25 22:17:54.345 -06:00 [INF] Executing OkObjectResult, writing value of type 'HelpDesk.Application.DTOs.PagedResult`1[[HelpDesk.Application.DTOs.Audit.SecurityAuditLogDto, HelpDesk.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 22:17:54.354 -06:00 [INF] Executed action HelpDesk.Api.Controllers.AuditController.GetSecurityLogs (HelpDesk.API) in 52.1293ms
2025-11-25 22:17:54.354 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.AuditController.GetSecurityLogs (HelpDesk.API)'
2025-11-25 22:17:54.354 -06:00 [INF] HTTP GET /api/audit/security responded 200 in 121.9802 ms
2025-11-25 22:17:54.354 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/audit/security?Page=1&PageSize=10 - 200 null application/json; charset=utf-8 122.6592ms
2025-11-25 22:29:08.686 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Users - null null
2025-11-25 22:29:08.697 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__jti_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[CreatedAt], [u].[DeletedAt], [u].[IsActiveSession], [u].[IsDeleted], [u].[JwtId], [u].[LoginAt], [u].[LoginIpAddress], [u].[LoginUserAgent], [u].[LogoutAt], [u].[LogoutIpAddress], [u].[LogoutReason], [u].[LogoutUserAgent], [u].[RefreshToken], [u].[RefreshTokenExpiresAt], [u].[TokenExpiresAt], [u].[UpdatedAt], [u].[UserId]
FROM [security].[UserSessions] AS [u]
WHERE [u].[JwtId] = @__jti_0
2025-11-25 22:29:08.705 -06:00 [INF] Executed DbCommand (6ms) [Parameters=[@__roleNames_0='?' (Size = 4000), @__permission_1='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [security].[RolePermissions] AS [r]
        INNER JOIN [security].[Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
        WHERE [r0].[Name] IN (
            SELECT [r1].[value]
            FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(256) '$') AS [r1]
        ) AND [r].[Permission] = @__permission_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-11-25 22:29:08.706 -06:00 [INF] Executing endpoint 'HelpDesk.Api.Controllers.UsersController.GetUsers (HelpDesk.API)'
2025-11-25 22:29:08.708 -06:00 [INF] Route matched with {action = "GetUsers", controller = "Users"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller HelpDesk.Api.Controllers.UsersController (HelpDesk.API).
2025-11-25 22:29:08.709 -06:00 [INF] Executing action method HelpDesk.Api.Controllers.UsersController.GetUsers (HelpDesk.API) - Validation state: "Valid"
2025-11-25 22:29:08.719 -06:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Email], [u].[FullName]
FROM [security].[Users] AS [u]
2025-11-25 22:29:08.722 -06:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 22:29:08.723 -06:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [security].[UserRoles] AS [u]
INNER JOIN [security].[Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-11-25 22:29:08.723 -06:00 [INF] Executed action method HelpDesk.Api.Controllers.UsersController.GetUsers (HelpDesk.API), returned result Microsoft.AspNetCore.Mvc.OkObjectResult in 14.0153ms.
2025-11-25 22:29:08.723 -06:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[HelpDesk.Application.DTOs.UserDto, HelpDesk.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-25 22:29:08.724 -06:00 [INF] Executed action HelpDesk.Api.Controllers.UsersController.GetUsers (HelpDesk.API) in 15.1492ms
2025-11-25 22:29:08.724 -06:00 [INF] Executed endpoint 'HelpDesk.Api.Controllers.UsersController.GetUsers (HelpDesk.API)'
2025-11-25 22:29:08.724 -06:00 [INF] HTTP GET /api/Users responded 200 in 37.1724 ms
2025-11-25 22:29:08.724 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Users - 200 null application/json; charset=utf-8 37.7569ms
2025-11-25 22:29:23.463 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/api/Users - null null
2025-11-25 22:29:23.463 -06:00 [INF] HTTP GET /api/Users responded 307 in 0.1084 ms
2025-11-25 22:29:23.463 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/api/Users - 307 0 null 0.4627ms
2025-11-25 22:29:23.470 -06:00 [INF] Request starting HTTP/2 GET https://localhost:7276/api/Users - null null
2025-11-25 22:29:23.470 -06:00 [INF] CORS policy execution successful.
2025-11-25 22:29:23.471 -06:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
HelpDesk.Infrastructure.Auth.PermissionRequirement
2025-11-25 22:29:23.471 -06:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-25 22:29:23.471 -06:00 [INF] HTTP GET /api/Users responded 401 in 1.0026 ms
2025-11-25 22:29:23.471 -06:00 [INF] Request finished HTTP/2 GET https://localhost:7276/api/Users - 401 0 null 1.3253ms
2025-11-25 22:31:21.798 -06:00 [INF] Request starting HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - null null
2025-11-25 22:31:21.809 -06:00 [INF] HTTP GET /swagger/v1/swagger.json responded 200 in 11.4098 ms
2025-11-25 22:31:21.810 -06:00 [INF] Request finished HTTP/1.1 GET http://localhost:5021/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.902ms
2025-11-25 22:46:31.072 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 22:46:31.659 -06:00 [FTL] La aplicación terminó inesperadamente
System.InvalidOperationException: Unable to find the required services. Please add all the required services by calling 'IServiceCollection.AddRateLimiter' in the application startup code.
   at Microsoft.AspNetCore.Builder.RateLimiterApplicationBuilderExtensions.VerifyServicesAreRegistered(IApplicationBuilder app)
   at Microsoft.AspNetCore.Builder.RateLimiterApplicationBuilderExtensions.UseRateLimiter(IApplicationBuilder app)
   at Program.<Main>$(String[] args) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Program.cs:line 88
2025-11-25 23:08:03.734 -06:00 [INF] Iniciando HelpDesk API
2025-11-25 23:08:04.385 -06:00 [FTL] La aplicación terminó inesperadamente
System.InvalidOperationException: Unable to find the required services. Please add all the required services by calling 'IServiceCollection.AddRateLimiter' in the application startup code.
   at Microsoft.AspNetCore.Builder.RateLimiterApplicationBuilderExtensions.VerifyServicesAreRegistered(IApplicationBuilder app)
   at Microsoft.AspNetCore.Builder.RateLimiterApplicationBuilderExtensions.UseRateLimiter(IApplicationBuilder app)
   at Program.<Main>$(String[] args) in D:\REPOSITORY\HelpDesk\HelpDesk.API\Program.cs:line 88
